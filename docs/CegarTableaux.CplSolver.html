<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <link href="coqdoc.css" rel="stylesheet" type="text/css" />
  <link href="coqdocjs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="config.js"></script>
  <script type="text/javascript" src="coqdocjs.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
        <script> document.write(document.title) </script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
  </div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">CegarTableaux.CplSolver</h1>

<div class="code">
</div>

<div class="doc">
An assumed classical SAT-solver oracle.

<div class="paragraph"> </div>

    We define <span class="inlinecode"><span class="id" title="keyword">Parameter</span></span> types and functions which must be filled in during
    program extraction. They must also satisfy the axioms as defined in
    <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="record">solver_axioms</span></a></span>.

<div class="paragraph"> </div>

    See the Extract module for details about our Minisat implementation.

<div class="paragraph"> </div>

<a id="lab1"></a><h1 class="section">Caveats</h1>


<div class="paragraph"> </div>

    We allow the SAT-solver to have mutable state. Mutability is not easy
    to formalise in Rocq (though <a href="https://softwarefoundations.cis.upenn.edu/plf-current/References.html"> possible</a>).
    Our functions are defined as though the SAT-solver is immutable
    (as we return a new solver on <span class="inlinecode"><a class="idref" href="CegarTableaux.Kripke.html#make"><span class="id" title="definition">make</span></a></span> / <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a></span>).

<div class="paragraph"> </div>

    For our implementation to be correct, we must <i>manually</i> ensure that
    we never use a mutated solver, i.e. a solver that has been used
    as input to <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a></span>. We must also be careful with how the solver is
    used, as referential transparency is lost.

<div class="paragraph"> </div>

    Future work to resolve this issue: wrap the solver in a monad.
    Something similar to <a href="https://github.com/Lysxia/coq-simple-io"> coq-simple-io</a>
    may help with extracting to use the <span class="inlinecode"><span class="id" title="var">IO</span></span> monad. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">List</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux</span> <span class="id" title="keyword">Require</span> <a class="idref" href="CegarTableaux.CplClause.html#"><span class="id" title="library">CplClause</span></a> <a class="idref" href="CegarTableaux.Assumptions.html#"><span class="id" title="library">Assumptions</span></a> <a class="idref" href="CegarTableaux.Lit.html#"><span class="id" title="library">Lit</span></a> <a class="idref" href="CegarTableaux.Cnf.html#"><span class="id" title="library">Cnf</span></a> <a class="idref" href="CegarTableaux.Valuation.html#"><span class="id" title="library">Valuation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CegarTableaux.Utils.html#"><span class="id" title="library">Utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux.CplSolver</span> <span class="id" title="keyword">Require</span> <a class="idref" href="CegarTableaux.CplSolver.Solution.html#"><span class="id" title="library">Solution</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Permutation</span> <span class="id" title="library">SetoidPermutation</span> <span class="id" title="library">SetoidList</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">List.ListNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>

<br/>
</div>

<div class="doc">
A (possibly stateful) classical SAT-solver oracle. 
</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a id="t" class="idref" href="#t"><span class="id" title="axiom">t</span></a> : <span class="id" title="keyword">Type</span>.<br/>

<br/>
</div>

<div class="doc">
Creates a new SAT-solver.

<div class="paragraph"> </div>

    This has a slightly odd type because the solver is technically mutable.
    This must be a function since we can create multiple distinct instances
    of a SAT solver; being a constant (e.g. just <span class="inlinecode"><a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">t</span></a></span>) would not work as all
    solvers would then be the same instance. 
</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a id="make" class="idref" href="#make"><span class="id" title="axiom">make</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>.<br/>

<br/>
</div>

<div class="doc">
Add a clause to the solver, returning the new solver.

<div class="paragraph"> </div>

    See module documentation for caveats. 
</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a id="add_clause" class="idref" href="#add_clause"><span class="id" title="axiom">add_clause</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplClause.html#t"><span class="id" title="definition">CplClause.t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>.<br/>

<br/>
</div>

<div class="doc">
Determines the satisfiability of the provided solver state under a set of
    unit assumptions.

<div class="paragraph"> </div>

    The solver state is unchanged by this function call. 
</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a id="solve_with_assumptions" class="idref" href="#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.t"><span class="id" title="inductive">Solution.t</span></a>.<br/>

<br/>
</div>

<div class="doc">
Create a new solver with the provided CNF clauses. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="make_with_clauses" class="idref" href="#make_with_clauses"><span class="id" title="definition">make_with_clauses</span></a> (<a id="clauses:9" class="idref" href="#clauses:9"><span class="id" title="binder">clauses</span></a> : <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a>) : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">List.fold_left</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clauses:9"><span class="id" title="variable">clauses</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#make"><span class="id" title="axiom">make</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab2"></a><h1 class="section">Axioms</h1>

<div class="paragraph"> </div>

 All clauses which have been added to this solver.

<div class="paragraph"> </div>

    This parameter is not (and should not) be used by the algorithm
    implementation. It is only used to describe the axioms of the solver. 
</div>
<div class="code">
<span class="id" title="keyword">Parameter</span> <a id="clauses_of" class="idref" href="#clauses_of"><span class="id" title="axiom">clauses_of</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a>.<br/>

<br/>
</div>

<div class="doc">
The assumptions and clauses of the solver combined.

<div class="paragraph"> </div>

    Returns the equivalent CNF formula that the solver is determining the
    satisfiability for (including the unit assumptions). 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="solved_clauses" class="idref" href="#solved_clauses"><span class="id" title="definition">solved_clauses</span></a> (<a id="solver:12" class="idref" href="#solver:12"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:13" class="idref" href="#assumptions:13"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) : <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Cnf.html#from_assumptions"><span class="id" title="definition">Cnf.from_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:13"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:12"><span class="id" title="variable">solver</span></a>.<br/>

<br/>
</div>

<div class="doc">
Set of atoms that are in the solver or assumptions. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="atms_of" class="idref" href="#atms_of"><span class="id" title="definition">atms_of</span></a> (<a id="solver:14" class="idref" href="#solver:14"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:15" class="idref" href="#assumptions:15"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Cnf.html#atms_of"><span class="id" title="definition">Cnf.atms_of</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#solved_clauses"><span class="id" title="definition">solved_clauses</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:14"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:15"><span class="id" title="variable">assumptions</span></a>).<br/>

<br/>
</div>

<div class="doc">
Returns every possible valuation that can be created by the atoms of the
    solver and assumptions. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="every_valuation" class="idref" href="#every_valuation"><span class="id" title="definition">every_valuation</span></a> (<a id="solver:16" class="idref" href="#solver:16"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:17" class="idref" href="#assumptions:17"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Valuation.html#every_valuation_of_atms"><span class="id" title="definition">Valuation.every_valuation_of_atms</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:16"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:17"><span class="id" title="variable">assumptions</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="In" class="idref" href="#In"><span class="id" title="definition">In</span></a> (<a id="x:18" class="idref" href="#x:18"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="solver:19" class="idref" href="#solver:19"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:20" class="idref" href="#assumptions:20"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Cnf.html#In"><span class="id" title="definition">Cnf.In</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#x:18"><span class="id" title="variable">x</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#solved_clauses"><span class="id" title="definition">solved_clauses</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:19"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:20"><span class="id" title="variable">assumptions</span></a>).<br/>

<br/>
</div>

<div class="doc">
Whether a clause does not introduce new atoms to the solver. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="clause_atms_incl" class="idref" href="#clause_atms_incl"><span class="id" title="definition">clause_atms_incl</span></a> (<a id="clause:21" class="idref" href="#clause:21"><span class="id" title="binder">clause</span></a> : <a class="idref" href="CegarTableaux.CplClause.html#t"><span class="id" title="definition">CplClause.t</span></a>) (<a id="solver:22" class="idref" href="#solver:22"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:23" class="idref" href="#assumptions:23"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:24" class="idref" href="#x:24"><span class="id" title="binder">x</span></a>, <a class="idref" href="CegarTableaux.CplClause.html#In"><span class="id" title="definition">CplClause.In</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#x:24"><span class="id" title="variable">x</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clause:21"><span class="id" title="variable">clause</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#x:24"><span class="id" title="variable">x</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:22"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:23"><span class="id" title="variable">assumptions</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="CegarTableaux.CplSolver.html#clause_atms_incl"><span class="id" title="definition">clause_atms_incl</span></a> <span class="id" title="var">clause</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> /.<br/>

<br/>
</div>

<div class="doc">
The correctness assumptions we make about the SAT solver. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a id="solver_axioms" class="idref" href="#solver_axioms"><span class="id" title="record">solver_axioms</span></a> (<a id="solver:25" class="idref" href="#solver:25"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) :=<br/>
{<br/>
&nbsp;&nbsp;</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a></span> <span class="inlinecode"><span class="id" title="var">solver</span></span> <span class="inlinecode"><span class="id" title="var">clause</span></span> correctly adds <span class="inlinecode"><span class="id" title="var">clause</span></span> to the
      clauses of <span class="inlinecode"><span class="id" title="var">solver</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<a id="add_clause_cons" class="idref" href="#add_clause_cons"><span class="id" title="projection">add_clause_cons</span></a> : <span class="id" title="keyword">forall</span> (<a id="clause:27" class="idref" href="#clause:27"><span class="id" title="binder">clause</span></a> : <a class="idref" href="CegarTableaux.CplClause.html#t"><span class="id" title="definition">CplClause.t</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clause:27"><span class="id" title="variable">clause</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clause:27"><span class="id" title="variable">clause</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a>;<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
The valuation returned by a satisfiable result is <span class="inlinecode"><a class="idref" href="CegarTableaux.Valuation.html#clash_free"><span class="id" title="definition">clash_free</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<a id="valuation_clash_free" class="idref" href="#valuation_clash_free"><span class="id" title="projection">valuation_clash_free</span></a> : <span class="id" title="keyword">forall</span> <a id="assumptions:29" class="idref" href="#assumptions:29"><span class="id" title="binder">assumptions</span></a> <a id="val:30" class="idref" href="#val:30"><span class="id" title="binder">val</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:30"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:29"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Valuation.html#clash_free"><span class="id" title="definition">Valuation.clash_free</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:30"><span class="id" title="variable">val</span></a>;<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
Every atom in the valuation is an atom in the solver or assumptions. 
</div>
<div class="code">
&nbsp;&nbsp;<a id="valuation_in_clauses" class="idref" href="#valuation_in_clauses"><span class="id" title="projection">valuation_in_clauses</span></a> : <span class="id" title="keyword">forall</span> <a id="assumptions:32" class="idref" href="#assumptions:32"><span class="id" title="binder">assumptions</span></a> <a id="val:33" class="idref" href="#val:33"><span class="id" title="binder">val</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:33"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:32"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:34" class="idref" href="#x:34"><span class="id" title="binder">x</span></a>, <a class="idref" href="CegarTableaux.Valuation.html#In"><span class="id" title="definition">Valuation.In</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#x:34"><span class="id" title="variable">x</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:33"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#x:34"><span class="id" title="variable">x</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:32"><span class="id" title="variable">assumptions</span></a>;<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
The valuation is a superset of the assumptions 
</div>
<div class="code">
&nbsp;&nbsp;<a id="valuation_supset_assumptions" class="idref" href="#valuation_supset_assumptions"><span class="id" title="projection">valuation_supset_assumptions</span></a> : <span class="id" title="keyword">forall</span> <a id="assumptions:36" class="idref" href="#assumptions:36"><span class="id" title="binder">assumptions</span></a> <a id="val:37" class="idref" href="#val:37"><span class="id" title="binder">val</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:37"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:36"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:36"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:37"><span class="id" title="variable">val</span></a>;<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
The unsatisfiable core is a subset of the unit assumptions. 
</div>
<div class="code">
&nbsp;&nbsp;<a id="core_subset_assumptions" class="idref" href="#core_subset_assumptions"><span class="id" title="projection">core_subset_assumptions</span></a> : <span class="id" title="keyword">forall</span> <a id="assumptions:39" class="idref" href="#assumptions:39"><span class="id" title="binder">assumptions</span></a> <a id="core:40" class="idref" href="#core:40"><span class="id" title="binder">core</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#core:40"><span class="id" title="variable">core</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:39"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.CplSolver.html#core:40"><span class="id" title="variable">core</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:39"><span class="id" title="variable">assumptions</span></a>;<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
The valuation satisfies the solver clauses. 
</div>
<div class="code">
&nbsp;&nbsp;<a id="solution_soundness" class="idref" href="#solution_soundness"><span class="id" title="projection">solution_soundness</span></a> : <span class="id" title="keyword">forall</span> <a id="assumptions:42" class="idref" href="#assumptions:42"><span class="id" title="binder">assumptions</span></a> <a id="val:43" class="idref" href="#val:43"><span class="id" title="binder">val</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:43"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:42"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="W:44" class="idref" href="#W:44"><span class="id" title="binder">W</span></a> <a id="R:45" class="idref" href="#R:45"><span class="id" title="binder">R</span></a> (<a id="M:46" class="idref" href="#M:46"><span class="id" title="binder">M</span></a> : @<a class="idref" href="CegarTableaux.Kripke.html#t"><span class="id" title="record">Kripke.t</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#W:44"><span class="id" title="variable">W</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#R:45"><span class="id" title="variable">R</span></a>) (<a id="w0:47" class="idref" href="#w0:47"><span class="id" title="binder">w0</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#W:44"><span class="id" title="variable">W</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Valuation.html#matches_kripke_valuation"><span class="id" title="definition">Valuation.matches_kripke_valuation</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:43"><span class="id" title="variable">val</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#M:46"><span class="id" title="variable">M</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#w0:47"><span class="id" title="variable">w0</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Cnf.html#force"><span class="id" title="definition">Cnf.force</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#M:46"><span class="id" title="variable">M</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#w0:47"><span class="id" title="variable">w0</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a>);<br/>
<br/>
&nbsp;&nbsp;</div>

<div class="doc">
The solver + unsatisfiable core is still unsatisfiable. 
</div>
<div class="code">
&nbsp;&nbsp;<a id="solution_completeness" class="idref" href="#solution_completeness"><span class="id" title="projection">solution_completeness</span></a> : <span class="id" title="keyword">forall</span> <a id="assumptions:49" class="idref" href="#assumptions:49"><span class="id" title="binder">assumptions</span></a> <a id="core:50" class="idref" href="#core:50"><span class="id" title="binder">core</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#core:50"><span class="id" title="variable">core</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:49"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Cnf.html#unsatisfiable"><span class="id" title="definition">Cnf.unsatisfiable</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#solved_clauses"><span class="id" title="definition">solved_clauses</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:25"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#core:50"><span class="id" title="variable">core</span></a>)<br/>
}.<br/>

<br/>
</div>

<div class="doc">
The empty SAT-solver contains no clauses. 
</div>
<div class="code">
<span class="id" title="keyword">Axiom</span> <a id="make_is_empty" class="idref" href="#make_is_empty"><span class="id" title="axiom">make_is_empty</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#make"><span class="id" title="axiom">make</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="notation">[]</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#axioms_make"><span class="id" title="axiom">axioms_make</span></a></span> and <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">axioms_ind</span></a></span> define which solvers satisfy the axioms.

<div class="paragraph"> </div>

    This isn't strictly necessary as <span class="inlinecode"><a class="idref" href="CegarTableaux.Kripke.html#make"><span class="id" title="definition">make</span></a></span> and <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a></span> is the only way
    you can create a solver instance. These axioms enforce that only solvers
    created by <span class="inlinecode"><a class="idref" href="CegarTableaux.Kripke.html#make"><span class="id" title="definition">make</span></a></span> and <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a></span> satisfy the solvers, to ensure that
    we can't accidentally make a solver through some other means. 
</div>
<div class="code">
<span class="id" title="keyword">Axiom</span> <a id="axioms_make" class="idref" href="#axioms_make"><span class="id" title="axiom">axioms_make</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#make"><span class="id" title="axiom">make</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>).<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a id="axioms_ind" class="idref" href="#axioms_ind"><span class="id" title="axiom">axioms_ind</span></a> : <span class="id" title="keyword">forall</span> <a id="solver:56" class="idref" href="#solver:56"><span class="id" title="binder">solver</span></a> <a id="clause:57" class="idref" href="#clause:57"><span class="id" title="binder">clause</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:56"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:56"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clause:57"><span class="id" title="variable">clause</span></a>).<br/>

<br/>
</div>

<div class="doc">
Applying <span class="inlinecode"><span class="id" title="var">List.fold_left</span></span> on a solver also satisfies axioms. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="axioms_fold_left" class="idref" href="#axioms_fold_left"><span class="id" title="lemma">axioms_fold_left</span></a> : <span class="id" title="keyword">forall</span> (<a id="solver:60" class="idref" href="#solver:60"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="phi:61" class="idref" href="#phi:61"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:60"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> (<span class="id" title="definition">List.fold_left</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#phi:61"><span class="id" title="variable">phi</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:60"><span class="id" title="variable">solver</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">phi</span>. <span class="id" title="var">revert</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">head</span> <span class="id" title="var">tail</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">Hsolver</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">axioms_ind</span></a>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">make_with_clauses</span></a></span> also satisfies solver axioms. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="axioms_clauses" class="idref" href="#axioms_clauses"><span class="id" title="lemma">axioms_clauses</span></a> : <span class="id" title="keyword">forall</span> (<a id="phi:62" class="idref" href="#phi:62"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a>), <a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">make_with_clauses</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#phi:62"><span class="id" title="variable">phi</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">phi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">make_with_clauses</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_fold_left"><span class="id" title="lemma">axioms_fold_left</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_make"><span class="id" title="axiom">axioms_make</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The clauses that the solver will hold from a <span class="inlinecode"><span class="id" title="var">List.fold_left</span></span> of clauses. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="clauses_of_fold_left" class="idref" href="#clauses_of_fold_left"><span class="id" title="lemma">clauses_of_fold_left</span></a> : <span class="id" title="keyword">forall</span> <a id="solver:63" class="idref" href="#solver:63"><span class="id" title="binder">solver</span></a> <a id="clauses:64" class="idref" href="#clauses:64"><span class="id" title="binder">clauses</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:63"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> (<span class="id" title="definition">List.fold_left</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clauses:64"><span class="id" title="variable">clauses</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:63"><span class="id" title="variable">solver</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="definition">List.rev</span> <a class="idref" href="CegarTableaux.CplSolver.html#clauses:64"><span class="id" title="variable">clauses</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:63"><span class="id" title="variable">solver</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">clauses</span>. <span class="id" title="var">revert</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">clauses</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">Hsolver</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> (<a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <span class="id" title="var">solver</span> <span class="id" title="var">h</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">axioms_ind</span></a>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause_cons"><span class="id" title="method">add_clause_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">List.app_assoc</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">IH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="atms_of_nodup" class="idref" href="#atms_of_nodup"><span class="id" title="lemma">atms_of_nodup</span></a> : <span class="id" title="keyword">forall</span> <a id="solver:65" class="idref" href="#solver:65"><span class="id" title="binder">solver</span></a> <a id="assumptions:66" class="idref" href="#assumptions:66"><span class="id" title="binder">assumptions</span></a>, <span class="id" title="inductive">List.NoDup</span> (<a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:65"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:66"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a>, <a class="idref" href="CegarTableaux.Cnf.html#atms_of"><span class="id" title="definition">Cnf.atms_of</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.NoDup_nodup</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="every_valuation_nodup" class="idref" href="#every_valuation_nodup"><span class="id" title="lemma">every_valuation_nodup</span></a> : <span class="id" title="keyword">forall</span> <a id="solver:67" class="idref" href="#solver:67"><span class="id" title="binder">solver</span></a> <a id="assumptions:68" class="idref" href="#assumptions:68"><span class="id" title="binder">assumptions</span></a>, <span class="id" title="inductive">NoDupA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:67"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:68"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#every_valuation_unique"><span class="id" title="lemma">Valuation.every_valuation_unique</span></a>, <a class="idref" href="CegarTableaux.CplSolver.html#atms_of_nodup"><span class="id" title="lemma">atms_of_nodup</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A satisfiable valuation is in <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a></span> of the solver. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="valuation_in_every_valuation_of" class="idref" href="#valuation_in_every_valuation_of"><span class="id" title="lemma">valuation_in_every_valuation_of</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="solver:69" class="idref" href="#solver:69"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:70" class="idref" href="#assumptions:70"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) (<a id="valuation:71" class="idref" href="#valuation:71"><span class="id" title="binder">valuation</span></a> : <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:69"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#valuation:71"><span class="id" title="variable">valuation</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:69"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:70"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">InA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#valuation:71"><span class="id" title="variable">valuation</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:69"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:70"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hsat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a>, <a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">atms</span> := <a class="idref" href="CegarTableaux.Cnf.html#atms_of"><span class="id" title="definition">Cnf.atms_of</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="CegarTableaux.CplSolver.html#valuation_clash_free"><span class="id" title="method">valuation_clash_free</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hsat</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsound</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#val_with_atms_in_every_val"><span class="id" title="lemma">Valuation.val_with_atms_in_every_val</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;atms&nbsp;is&nbsp;permutation&nbsp;of&nbsp;atms&nbsp;of&nbsp;val&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_Permutation</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="var">atms</span>, <a class="idref" href="CegarTableaux.Cnf.html#atms_of"><span class="id" title="definition">Cnf.atms_of</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.NoDup_nodup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#atms_of_nodup"><span class="id" title="lemma">Valuation.atms_of_nodup</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsound</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">setoid_rewrite</span> (<a class="idref" href="CegarTableaux.CplSolver.html#valuation_in_clauses"><span class="id" title="method">valuation_in_clauses</span></a> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">Hsat</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="CegarTableaux.Cnf.html#in_atms_of"><span class="id" title="lemma">Cnf.in_atms_of</span></a>. <span class="id" title="tactic">fold</span> <span class="id" title="var">atms</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A solver with an added clause that contains no new atoms has the same set of atoms 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="add_no_new_atms" class="idref" href="#add_no_new_atms"><span class="id" title="lemma">add_no_new_atms</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="solver:72" class="idref" href="#solver:72"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="clause:73" class="idref" href="#clause:73"><span class="id" title="binder">clause</span></a> : <a class="idref" href="CegarTableaux.CplClause.html#t"><span class="id" title="definition">CplClause.t</span></a>) (<a id="assumptions:74" class="idref" href="#assumptions:74"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:72"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#clause_atms_incl"><span class="id" title="definition">clause_atms_incl</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clause:73"><span class="id" title="variable">clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:72"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:74"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">Permutation</span> (<a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:72"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:74"><span class="id" title="variable">assumptions</span></a>) (<a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:72"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#clause:73"><span class="id" title="variable">clause</span></a>) <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:74"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">new_clause</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hclause_incl</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a>, <a class="idref" href="CegarTableaux.CplSolver.html#solved_clauses"><span class="id" title="definition">solved_clauses</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause_cons"><span class="id" title="method">add_clause_cons</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">NoDup_Permutation</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.NoDup_nodup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.NoDup_nodup</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;in&nbsp;assumptions&nbsp;++&nbsp;clauses&nbsp;-&gt;&nbsp;in&nbsp;assumptions&nbsp;++&nbsp;new_clause&nbsp;::&nbsp;clauses&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hx_in_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;simplify&nbsp;nodup&nbsp;and&nbsp;flatmap&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.nodup_In</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.nodup_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_flat_map</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_flat_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx_in_solver</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">clause</span> [<span class="id" title="var">Hclause_in_clauses</span> <span class="id" title="var">Hx_in_clause</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">clause</span>. <span class="id" title="tactic">split</span>...<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;in&nbsp;a&nbsp;++&nbsp;b&nbsp;-&gt;&nbsp;in&nbsp;a&nbsp;++&nbsp;c&nbsp;::&nbsp;b&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.in_app_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclause_in_clauses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hclause_in_clauses</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hclause_in_assumps</span> | <span class="id" title="var">Hclause_in_solver</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_app_iff</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_app_iff</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_cons</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;in&nbsp;assumptions&nbsp;++&nbsp;clauses&nbsp;&lt;-&nbsp;in&nbsp;assumptions&nbsp;++&nbsp;new_clause&nbsp;::&nbsp;clauses&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">Hx_in_solver'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;simplify&nbsp;nodup&nbsp;and&nbsp;flatmap&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.nodup_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_solver'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_flat_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_solver'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx_in_solver'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">clause</span> [<span class="id" title="var">Hclause_in_clauses</span> <span class="id" title="var">Hx_in_clause</span>]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;split&nbsp;into&nbsp;3&nbsp;cases,&nbsp;two&nbsp;are&nbsp;almost&nbsp;identical,&nbsp;so&nbsp;reorder&nbsp;to&nbsp;simplify&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.in_app_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclause_in_clauses</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclause_in_clauses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#or_comm"><span class="id" title="lemma">or_comm</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#or_assoc"><span class="id" title="lemma">or_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclause_in_clauses</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hclause_in_clauses</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_new</span> | <span class="id" title="var">Hin_existing</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;new&nbsp;clause&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span> <span class="id" title="var">clause</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hclause_incl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Cnf.html#in_atms_of"><span class="id" title="lemma">Cnf.in_atms_of</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hclause_incl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;solver&nbsp;or&nbsp;assumptions&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.nodup_In</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_flat_map</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">clause</span>. <span class="id" title="tactic">split</span>... <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_app_iff</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Adds a list of literals interpreted as a conflict set.

<div class="paragraph"> </div>

    <span class="inlinecode"><a class="idref" href="CegarTableaux.Solver.html#HA.conflict_set"><span class="id" title="projection">conflict_set</span></a></span> should be a subset of a previous valuation.
    <span class="inlinecode"><a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">add_conflict_set</span></a></span> will add a clause requiring that at least one of these
    literals must be different if the next solution is also satisfiable. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="add_conflict_set" class="idref" href="#add_conflict_set"><span class="id" title="definition">add_conflict_set</span></a> <a id="solver:75" class="idref" href="#solver:75"><span class="id" title="binder">solver</span></a> <a id="conflict_set:76" class="idref" href="#conflict_set:76"><span class="id" title="binder">conflict_set</span></a> := <a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">add_clause</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:75"><span class="id" title="variable">solver</span></a> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#conflict_set:76"><span class="id" title="variable">conflict_set</span></a>).<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><span class="id" title="var">val</span></span> = solution of <span class="inlinecode"><span class="id" title="var">solver</span></span> and <span class="inlinecode"><span class="id" title="var">val'</span></span> = solution of <span class="inlinecode"><span class="id" title="var">solver'</span></span>
    where <span class="inlinecode"><span class="id" title="var">solver'</span></span> contains the conflict set as one of it's clauses,
    then <span class="inlinecode"><span class="id" title="var">val</span></span> and <span class="inlinecode"><span class="id" title="var">val'</span></span> cannot be equal. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="refined_solver_diff_val" class="idref" href="#refined_solver_diff_val"><span class="id" title="lemma">refined_solver_diff_val</span></a> : <span class="id" title="keyword">forall</span> <a id="solver:77" class="idref" href="#solver:77"><span class="id" title="binder">solver</span></a> <a id="assumptions:78" class="idref" href="#assumptions:78"><span class="id" title="binder">assumptions</span></a> <a id="val:79" class="idref" href="#val:79"><span class="id" title="binder">val</span></a> <a id="conflict_set:80" class="idref" href="#conflict_set:80"><span class="id" title="binder">conflict_set</span></a> <a id="solver':81" class="idref" href="#solver':81"><span class="id" title="binder">solver'</span></a> <a id="val':82" class="idref" href="#val':82"><span class="id" title="binder">val'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:77"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver':81"><span class="id" title="variable">solver'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:79"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver:77"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:78"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.CplSolver.html#conflict_set:80"><span class="id" title="variable">conflict_set</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:79"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#conflict_set:80"><span class="id" title="variable">conflict_set</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">List.In</span> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#conflict_set:80"><span class="id" title="variable">conflict_set</span></a>) (<a class="idref" href="CegarTableaux.CplSolver.html#clauses_of"><span class="id" title="axiom">clauses_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver':81"><span class="id" title="variable">solver'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#CegarTableaux.CplSolver.Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val':82"><span class="id" title="variable">val'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver':81"><span class="id" title="variable">solver'</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:78"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val:79"><span class="id" title="variable">val</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#val':82"><span class="id" title="variable">val'</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">conflict_set</span> <span class="id" title="var">solver'</span> <span class="id" title="var">val'</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hsolver'</span> <span class="id" title="var">Hval</span> <span class="id" title="var">Hcs_val</span> <span class="id" title="var">Hcs_nonempty</span> <span class="id" title="var">Hcs_in_solver'</span> <span class="id" title="var">Hval'</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;need&nbsp;to&nbsp;prove&nbsp;by&nbsp;contradiction&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="CegarTableaux.CplSolver.html#solution_soundness"><span class="id" title="method">solution_soundness</span></a> <span class="id" title="var">solver'</span> <span class="id" title="var">Hsolver'</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val'</span> <span class="id" title="var">Hval'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsound</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;-&gt;&nbsp;forces&nbsp;solved_clauses&nbsp;(added&nbsp;conflict&nbsp;set).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;but&nbsp;conflict&nbsp;set&nbsp;subset&nbsp;of&nbsp;val'&nbsp;so&nbsp;it&nbsp;cannot&nbsp;match&nbsp;the&nbsp;kripke&nbsp;valuation.&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsound</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">W</span> [<span class="id" title="var">R</span> [<span class="id" title="var">M</span> [<span class="id" title="var">w0</span> [<span class="id" title="var">Hval_match</span> <span class="id" title="var">Hforce</span>]]]]].<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;M&nbsp;w0&nbsp;|=&nbsp;clauses_of&nbsp;solver'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;isolate&nbsp;just&nbsp;the&nbsp;conflict&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Cnf.html#force"><span class="id" title="definition">Cnf.force</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.Forall_forall</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hforce</span> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <span class="id" title="var">conflict_set</span>) <span class="id" title="var">Hcs_in_solver'</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;forcing&nbsp;~conflict&nbsp;set&nbsp;-&gt;&nbsp;~l&nbsp;in&nbsp;conflict&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;but&nbsp;+l&nbsp;in&nbsp;conflict&nbsp;set&nbsp;because&nbsp;conflict&nbsp;set&nbsp;subset&nbsp;of&nbsp;val.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hforce</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> [<span class="id" title="var">Hl_in_cs</span> <span class="id" title="var">Hforce_l</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">replace_hyp</span> <span class="id" title="var">Hl_in_cs</span> <span class="id" title="keyword">with</span> (<span class="id" title="definition">List.In</span> (<a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <span class="id" title="var">l</span>) <span class="id" title="var">conflict_set</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_map</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span>:=<a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hl_in_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl_in_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="CegarTableaux.Lit.html#negate_involution"><span class="id" title="lemma">Lit.negate_involution</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl_in_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_id</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl_in_cs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;~l&nbsp;in&nbsp;val'&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcs_val</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl_in_cs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_in</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">l'</span> := <span class="id" title="var">val'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hl_in_cs</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Hl_in_cs</span> <span class="id" title="var">into</span> <span class="id" title="var">Hnl_in_val'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Valuation.html#matches_kripke_valuation"><span class="id" title="definition">Valuation.matches_kripke_valuation</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hval_match</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Hnl_in_val'&nbsp;and&nbsp;Hforce_l&nbsp;form&nbsp;a&nbsp;contradiction.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span>|<span class="id" title="var">p</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce_l</span>, <span class="id" title="var">Hnl_in_val'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.Valuation.html#clash_free_no_negation"><span class="id" title="lemma">Valuation.clash_free_no_negation</span></a> (<a class="idref" href="CegarTableaux.Lit.html#Pos"><span class="id" title="constructor">Lit.Pos</span></a> <span class="id" title="var">p</span>) <span class="id" title="var">val'</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#valuation_clash_free"><span class="id" title="method">valuation_clash_free</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">assumptions</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hval_match</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.Valuation.html#lit_in_atm_in"><span class="id" title="lemma">Valuation.lit_in_atm_in</span></a> (<a class="idref" href="CegarTableaux.Lit.html#Neg"><span class="id" title="constructor">Lit.Neg</span></a> <span class="id" title="var">p</span>))...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hforce_l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hval_match</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.Valuation.html#lit_in_atm_in"><span class="id" title="lemma">Valuation.lit_in_atm_in</span></a> (<a class="idref" href="CegarTableaux.Lit.html#Pos"><span class="id" title="constructor">Lit.Pos</span></a> <span class="id" title="var">p</span>))...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
If two solvers have the same set of atoms, they must have the same set
    of possible valuations. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="same_atms_valuation_set" class="idref" href="#same_atms_valuation_set"><span class="id" title="lemma">same_atms_valuation_set</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="solvera:83" class="idref" href="#solvera:83"><span class="id" title="binder">solvera</span></a> <a id="solverb:84" class="idref" href="#solverb:84"><span class="id" title="binder">solverb</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">t</span></a>) (<a id="assumptions:85" class="idref" href="#assumptions:85"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solvera:83"><span class="id" title="variable">solvera</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">solver_axioms</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solverb:84"><span class="id" title="variable">solverb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">Permutation</span> (<a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solvera:83"><span class="id" title="variable">solvera</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:85"><span class="id" title="variable">assumptions</span></a>) (<a class="idref" href="CegarTableaux.CplSolver.html#atms_of"><span class="id" title="definition">atms_of</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solverb:84"><span class="id" title="variable">solverb</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:85"><span class="id" title="variable">assumptions</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">PermutationA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solvera:83"><span class="id" title="variable">solvera</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:85"><span class="id" title="variable">assumptions</span></a>) (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solverb:84"><span class="id" title="variable">solverb</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#assumptions:85"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solvera</span> <span class="id" title="var">solverb</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">Hsolvera</span> <span class="id" title="var">Hsolverb</span> <span class="id" title="var">Hatms_perm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">every_valuation</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#every_valuation_perm"><span class="id" title="lemma">Valuation.every_valuation_perm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a
    href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
