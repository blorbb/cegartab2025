<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <link href="coqdoc.css" rel="stylesheet" type="text/css" />
  <link href="coqdocjs.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="config.js"></script>
  <script type="text/javascript" src="coqdocjs.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename">
        <script> document.write(document.title) </script>
      </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
  </div>
  <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">CegarTableaux.Solver</h1>

<div class="code">
</div>

<div class="doc">
CEGARBox SAT-solver.

<div class="paragraph"> </div>

    We make heavy use of Program Fixpoint/Definition.

<div class="paragraph"> </div>

    Program Fixpoint allows us to prove that a fixpoint terminates with a custom
    well-founded measurement, and generates obligations to show that every
    recursive call is indeed a strict decrease of the measurement.

<div class="paragraph"> </div>

    Program also allows us to leave 'holes' in places where propositions are expected.
    We can then fill in these holes as obligations, so that we can actually
    use the proof language rather than trying to do some stuff with function application. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">List</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Relations</span> <span class="id" title="library">Program</span> <span class="id" title="library">Wellfounded</span> <span class="id" title="library">Lia</span> <span class="id" title="library">RelationClasses</span> <span class="id" title="library">SetoidList</span> <span class="id" title="library">Permutation</span> <span class="id" title="library">SetoidPermutation</span> <span class="id" title="library">FunInd</span> <span class="id" title="library">Recdef</span> <span class="id" title="library">PeanoNat</span> <span class="id" title="library">Nat</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">List.ListNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux</span> <span class="id" title="keyword">Require</span> <a class="idref" href="CegarTableaux.CplSolver.html#"><span class="id" title="library">CplSolver</span></a> <a class="idref" href="CegarTableaux.Lit.html#"><span class="id" title="library">Lit</span></a> <a class="idref" href="CegarTableaux.Mchain.html#"><span class="id" title="library">Mchain</span></a> <a class="idref" href="CegarTableaux.Assumptions.html#"><span class="id" title="library">Assumptions</span></a> <a class="idref" href="CegarTableaux.Valuation.html#"><span class="id" title="library">Valuation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CegarTableaux.Utils.html#"><span class="id" title="library">Utils</span></a> <a class="idref" href="CegarTableaux.ListExt.html#"><span class="id" title="library">ListExt</span></a>.<br/>

<br/>
</div>

<div class="doc">
A CEGARBox sat/unsat solution. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="Solution" class="idref" href="#Solution"><span class="id" title="module">Solution</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Solution.t" class="idref" href="#Solution.t"><span class="id" title="definition, inductive"><span id="Solution.t_rect" class="id"><span id="Solution.t_ind" class="id"><span id="Solution.t_rec" class="id"><span id="Solution.t_sind" class="id">t</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Solution.Sat" class="idref" href="#Solution.Sat"><span class="id" title="constructor">Sat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Solution.Unsat" class="idref" href="#Solution.Unsat"><span class="id" title="constructor">Unsat</span></a> (<a id="core:3" class="idref" href="#core:3"><span class="id" title="binder">core</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>).<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#Solution"><span class="id" title="module">Solution</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h1 class="section">Conflict set lemmas</h1>

<div class="paragraph"> </div>

 Creates a conflict set. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="conflict_set_of" class="idref" href="#conflict_set_of"><span class="id" title="definition">conflict_set_of</span></a> <a id="w0:4" class="idref" href="#w0:4"><span class="id" title="binder">w0</span></a> <a id="solver_val:5" class="idref" href="#solver_val:5"><span class="id" title="binder">solver_val</span></a> <a id="dia_antecedent:6" class="idref" href="#dia_antecedent:6"><span class="id" title="binder">dia_antecedent</span></a> <a id="core:7" class="idref" href="#core:7"><span class="id" title="binder">core</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="fired_box_clauses:9" class="idref" href="#fired_box_clauses:9"><span class="id" title="binder">fired_box_clauses</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Lclauses.html#boxes"><span class="id" title="projection">Lclauses.boxes</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:4"><span class="id" title="variable">w0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:8" class="idref" href="#box:8"><span class="id" title="binder">box</span></a> =&gt; <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver_val:5"><span class="id" title="variable">solver_val</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:8"><span class="id" title="variable">box</span></a>)) <br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#fired_box_clauses:9"><span class="id" title="variable">fired_box_clauses</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:10" class="idref" href="#box:10"><span class="id" title="binder">box</span></a> =&gt; <span class="id" title="definition">List.existsb</span> (<a class="idref" href="CegarTableaux.Lit.html#eqb"><span class="id" title="definition">Lit.eqb</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:10"><span class="id" title="variable">box</span></a>)) <a class="idref" href="CegarTableaux.Solver.html#core:7"><span class="id" title="variable">core</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="abbreviation">List.map</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="CegarTableaux.Solver.html#dia_antecedent:6"><span class="id" title="variable">dia_antecedent</span></a>.<br/>

<br/>
</div>

<div class="doc">
The learned clause that should be added. The negation of a conflict set. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="learned_clause_of" class="idref" href="#learned_clause_of"><span class="id" title="definition">learned_clause_of</span></a> <a id="w0:11" class="idref" href="#w0:11"><span class="id" title="binder">w0</span></a> <a id="solver_val:12" class="idref" href="#solver_val:12"><span class="id" title="binder">solver_val</span></a> <a id="dia_antecedent:13" class="idref" href="#dia_antecedent:13"><span class="id" title="binder">dia_antecedent</span></a> <a id="core:14" class="idref" href="#core:14"><span class="id" title="binder">core</span></a> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;negate&nbsp;and&nbsp;interpret&nbsp;as&nbsp;CPL&nbsp;clause&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> (<a class="idref" href="CegarTableaux.Solver.html#conflict_set_of"><span class="id" title="definition">conflict_set_of</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:11"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver_val:12"><span class="id" title="variable">solver_val</span></a> <a class="idref" href="CegarTableaux.Solver.html#dia_antecedent:13"><span class="id" title="variable">dia_antecedent</span></a> <a class="idref" href="CegarTableaux.Solver.html#core:14"><span class="id" title="variable">core</span></a>).<br/>

<br/>
</div>

<div class="doc">
The conflict set is a subset of the valuation. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="conflict_set_incl_val" class="idref" href="#conflict_set_incl_val"><span class="id" title="lemma">conflict_set_incl_val</span></a> : <span class="id" title="keyword">forall</span> <a id="w0:15" class="idref" href="#w0:15"><span class="id" title="binder">w0</span></a> <a id="val:16" class="idref" href="#val:16"><span class="id" title="binder">val</span></a> <a id="dia_antecedent:17" class="idref" href="#dia_antecedent:17"><span class="id" title="binder">dia_antecedent</span></a> <a id="core:18" class="idref" href="#core:18"><span class="id" title="binder">core</span></a> <a id="solver:19" class="idref" href="#solver:19"><span class="id" title="binder">solver</span></a> <a id="assumptions:20" class="idref" href="#assumptions:20"><span class="id" title="binder">assumptions</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:19"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:16"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:19"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:20"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:16"><span class="id" title="variable">val</span></a> <a class="idref" href="CegarTableaux.Solver.html#dia_antecedent:17"><span class="id" title="variable">dia_antecedent</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="conflict_set:21" class="idref" href="#conflict_set:21"><span class="id" title="binder">conflict_set</span></a> := <a class="idref" href="CegarTableaux.Solver.html#conflict_set_of"><span class="id" title="definition">conflict_set_of</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:15"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:16"><span class="id" title="variable">val</span></a> <a class="idref" href="CegarTableaux.Solver.html#dia_antecedent:17"><span class="id" title="variable">dia_antecedent</span></a> <a class="idref" href="CegarTableaux.Solver.html#core:18"><span class="id" title="variable">core</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:21"><span class="id" title="variable">conflict_set</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:16"><span class="id" title="variable">val</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w0</span> <span class="id" title="var">val</span> <span class="id" title="var">dia_antecedent</span> <span class="id" title="var">core</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hval</span> <span class="id" title="var">Hforce_ante</span> <span class="id" title="var">conflict_set</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">conflict_set</span>, <a class="idref" href="CegarTableaux.Solver.html#conflict_set_of"><span class="id" title="definition">conflict_set_of</span></a>, "|&gt;". <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx_in_cs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_cs</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx_in_cs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hante</span> | <span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce_ante</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.existsb_exists</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforce_ante</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> [<span class="id" title="var">Hl_in_val</span> <span class="id" title="var">Heq_ante</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Lit.html#eqb_eq"><span class="id" title="lemma">Lit.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_ante</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">List.in_map_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pair</span> [<span class="id" title="var">Hfst_x</span> <span class="id" title="var">Hpair_in</span>]].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;remove&nbsp;the&nbsp;two&nbsp;filters&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;first&nbsp;filter&nbsp;doesn't&nbsp;matter,&nbsp;second&nbsp;filter&nbsp;shows&nbsp;that&nbsp;(fst&nbsp;box)&nbsp;is&nbsp;in&nbsp;solver&nbsp;val&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.incl_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpair_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.filter_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpair_in</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hpair_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hin</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.existsb_exists</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> [<span class="id" title="var">Hl_in_val</span> <span class="id" title="var">Heq_ante</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Lit.html#eqb_eq"><span class="id" title="lemma">Lit.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq_ante</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Adding a subset of a CPL solver valuation adds no new atoms to the solver state. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="val_subset_no_new_atms" class="idref" href="#val_subset_no_new_atms"><span class="id" title="lemma">val_subset_no_new_atms</span></a> : <span class="id" title="keyword">forall</span> <a id="solver:22" class="idref" href="#solver:22"><span class="id" title="binder">solver</span></a> <a id="assumptions:23" class="idref" href="#assumptions:23"><span class="id" title="binder">assumptions</span></a> <a id="val:24" class="idref" href="#val:24"><span class="id" title="binder">val</span></a> <a id="subset:25" class="idref" href="#subset:25"><span class="id" title="binder">subset</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:22"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:24"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:22"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:23"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.Solver.html#subset:25"><span class="id" title="variable">subset</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:24"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#clause_atms_incl"><span class="id" title="definition">CplSolver.clause_atms_incl</span></a> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <a class="idref" href="CegarTableaux.Solver.html#subset:25"><span class="id" title="variable">subset</span></a>) <a class="idref" href="CegarTableaux.Solver.html#solver:22"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:23"><span class="id" title="variable">assumptions</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">subset</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hval</span> <span class="id" title="var">Hsubset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">List.incl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsubset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx_in_subset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="CegarTableaux.CplSolver.html#valuation_in_clauses"><span class="id" title="method">CplSolver.valuation_in_clauses</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">val</span>:=<span class="id" title="var">val</span>)... <span class="id" title="var">cbn</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_map</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_subset</span>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="CegarTableaux.Lit.html#negate_eq_atm"><span class="id" title="lemma">Lit.negate_eq_atm</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx_in_subset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.in_map_iff</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx_in_subset</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> [<span class="id" title="var">Hlx</span> <span class="id" title="var">Hl_in_subset</span>]]. <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Adding the learned clause adds no new atoms to the solver state. 
</div>
<div class="code">
<span class="id" title="keyword">Corollary</span> <a id="learned_clause_no_new_atms" class="idref" href="#learned_clause_no_new_atms"><span class="id" title="lemma">learned_clause_no_new_atms</span></a> : <span class="id" title="keyword">forall</span> <a id="w0:26" class="idref" href="#w0:26"><span class="id" title="binder">w0</span></a> <a id="solver:27" class="idref" href="#solver:27"><span class="id" title="binder">solver</span></a> <a id="assumptions:28" class="idref" href="#assumptions:28"><span class="id" title="binder">assumptions</span></a> <a id="val:29" class="idref" href="#val:29"><span class="id" title="binder">val</span></a> <a id="c:30" class="idref" href="#c:30"><span class="id" title="binder">c</span></a> <a id="core:31" class="idref" href="#core:31"><span class="id" title="binder">core</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:27"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:29"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:27"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:28"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:29"><span class="id" title="variable">val</span></a> <a class="idref" href="CegarTableaux.Solver.html#c:30"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="learned_clause:32" class="idref" href="#learned_clause:32"><span class="id" title="binder">learned_clause</span></a> := <a class="idref" href="CegarTableaux.Solver.html#learned_clause_of"><span class="id" title="definition">learned_clause_of</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:26"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:29"><span class="id" title="variable">val</span></a> <a class="idref" href="CegarTableaux.Solver.html#c:30"><span class="id" title="variable">c</span></a> <a class="idref" href="CegarTableaux.Solver.html#core:31"><span class="id" title="variable">core</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#clause_atms_incl"><span class="id" title="definition">CplSolver.clause_atms_incl</span></a> <a class="idref" href="CegarTableaux.Solver.html#learned_clause:32"><span class="id" title="variable">learned_clause</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:27"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:28"><span class="id" title="variable">assumptions</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w0</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">c</span> <span class="id" title="var">core</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hval</span> <span class="id" title="var">Hc</span> <span class="id" title="var">learned_clause</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">learned_clause</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#learned_clause_of"><span class="id" title="definition">learned_clause_of</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#val_subset_no_new_atms"><span class="id" title="lemma">val_subset_no_new_atms</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">val</span>...<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set_incl_val"><span class="id" title="lemma">conflict_set_incl_val</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
An old valuation is in the learned solver's set of possible valuations. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="failed_val_in_solver'_vals" class="idref" href="#failed_val_in_solver'_vals"><span class="id" title="lemma">failed_val_in_solver'_vals</span></a> : <span class="id" title="keyword">forall</span> <a id="val:33" class="idref" href="#val:33"><span class="id" title="binder">val</span></a> <a id="solver:34" class="idref" href="#solver:34"><span class="id" title="binder">solver</span></a> <a id="assumptions:35" class="idref" href="#assumptions:35"><span class="id" title="binder">assumptions</span></a> <a id="conflict_set:36" class="idref" href="#conflict_set:36"><span class="id" title="binder">conflict_set</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:34"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:33"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:34"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:35"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:36"><span class="id" title="variable">conflict_set</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:33"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver':37" class="idref" href="#solver':37"><span class="id" title="binder">solver'</span></a> := <a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">CplSolver.add_conflict_set</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:34"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:36"><span class="id" title="variable">conflict_set</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="inductive">InA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:33"><span class="id" title="variable">val</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver':37"><span class="id" title="variable">solver'</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:35"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">val</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">conflict_set</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hval</span> <span class="id" title="var">Hcs_incl</span> <span class="id" title="var">solver'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#PermutationA_inA"><span class="id" title="lemma">PermutationA_inA</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#every_valuation_perm"><span class="id" title="lemma">Valuation.every_valuation_perm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">solver'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_no_new_atms"><span class="id" title="lemma">CplSolver.add_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#val_subset_no_new_atms"><span class="id" title="lemma">val_subset_no_new_atms</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">val</span>:=<span class="id" title="var">val</span>)...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#valuation_in_every_valuation_of"><span class="id" title="lemma">CplSolver.valuation_in_every_valuation_of</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h1 class="section">Conditions maintained through recursions</h1>

<div class="paragraph"> </div>

 Get the CPL clauses of the first modal context. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="first_cpls" class="idref" href="#first_cpls"><span class="id" title="definition">first_cpls</span></a> (<a id="chain:38" class="idref" href="#chain:38"><span class="id" title="binder">chain</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>) := <span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#chain:38"><span class="id" title="variable">chain</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <span class="id" title="var">w0</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
A history attempt, containing a valuation and conflict set. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="HA" class="idref" href="#HA"><span class="id" title="module">HA</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="HA.t" class="idref" href="#HA.t"><span class="id" title="record">t</span></a> := <span class="id" title="var">make</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;valuation&nbsp;that&nbsp;was&nbsp;attempted&nbsp;but&nbsp;failed.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="HA.failed_val" class="idref" href="#HA.failed_val"><span class="id" title="projection">failed_val</span></a> : <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;The&nbsp;conflict&nbsp;set&nbsp;generated&nbsp;from&nbsp;the&nbsp;attempted&nbsp;valuation.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="HA.conflict_set" class="idref" href="#HA.conflict_set"><span class="id" title="projection">conflict_set</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Lit.html#t"><span class="id" title="inductive">Lit.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="HA.Hcs_ne" class="idref" href="#HA.Hcs_ne"><span class="id" title="projection">Hcs_ne</span></a> : <a class="idref" href="CegarTableaux.Solver.html#conflict_set:42"><span class="id" title="method">conflict_set</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="notation">[]</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="HA.Hcs_incl" class="idref" href="#HA.Hcs_incl"><span class="id" title="projection">Hcs_incl</span></a> : <span class="id" title="definition">List.incl</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:42"><span class="id" title="method">conflict_set</span></a> <a class="idref" href="CegarTableaux.Solver.html#failed_val:41"><span class="id" title="method">failed_val</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
</div>

<div class="doc">
Make a CPL solver from the valuation history.

<div class="paragraph"> </div>

      Making this custom instead of using <span class="inlinecode"><span class="id" title="var">List.fold_right</span></span> as it makes
      the <span class="inlinecode"><span class="id" title="var">cbn</span></span>s more useful 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="HA.make_solver" class="idref" href="#HA.make_solver"><span class="id" title="definition">make_solver</span></a> (<a id="cnf:45" class="idref" href="#cnf:45"><span class="id" title="binder">cnf</span></a> : <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a>) (<a id="hist:46" class="idref" href="#hist:46"><span class="id" title="binder">hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#HA.t"><span class="id" title="record">t</span></a>) : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">CplSolver.t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#hist:46"><span class="id" title="variable">hist</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">CplSolver.make_with_clauses</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:45"><span class="id" title="variable">cnf</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> =&gt; <a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">CplSolver.add_conflict_set</span></a> (<a class="idref" href="CegarTableaux.Solver.html#make_solver:47"><span class="id" title="definition">make_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:45"><span class="id" title="variable">cnf</span></a> <span class="id" title="var">t</span>) (<a class="idref" href="CegarTableaux.Solver.html#HA.conflict_set"><span class="id" title="projection">HA.conflict_set</span></a> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="HA.make_solver_axioms" class="idref" href="#HA.make_solver_axioms"><span class="id" title="lemma">make_solver_axioms</span></a> : <span class="id" title="keyword">forall</span> <a id="cnf:49" class="idref" href="#cnf:49"><span class="id" title="binder">cnf</span></a> <a id="hist:50" class="idref" href="#hist:50"><span class="id" title="binder">hist</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> (<a class="idref" href="CegarTableaux.Solver.html#HA.make_solver"><span class="id" title="definition">make_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:49"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:50"><span class="id" title="variable">hist</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">phi</span> <span class="id" title="var">hist</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">hist</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_clauses"><span class="id" title="lemma">CplSolver.axioms_clauses</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">CplSolver.axioms_ind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A proposition requiring that every valuation attempt was created 
      by the valuation history of all other attempts. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="HA.attempts_from_solutions" class="idref" href="#HA.attempts_from_solutions"><span class="id" title="definition">attempts_from_solutions</span></a> (<a id="hist:51" class="idref" href="#hist:51"><span class="id" title="binder">hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#HA.t"><span class="id" title="record">t</span></a>) (<a id="cnf:52" class="idref" href="#cnf:52"><span class="id" title="binder">cnf</span></a> : <a class="idref" href="CegarTableaux.Cnf.html#t"><span class="id" title="definition">Cnf.t</span></a>) (<a id="assumptions:53" class="idref" href="#assumptions:53"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#hist:51"><span class="id" title="variable">hist</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> (<a class="idref" href="CegarTableaux.Solver.html#HA.failed_val"><span class="id" title="projection">failed_val</span></a> <span class="id" title="var">h</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> (<a class="idref" href="CegarTableaux.Solver.html#HA.make_solver"><span class="id" title="definition">make_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:52"><span class="id" title="variable">cnf</span></a> <span class="id" title="var">t</span>) <a class="idref" href="CegarTableaux.Solver.html#assumptions:53"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#attempts_from_solutions:54"><span class="id" title="definition">attempts_from_solutions</span></a> <span class="id" title="var">t</span> <a class="idref" href="CegarTableaux.Solver.html#cnf:52"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:53"><span class="id" title="variable">assumptions</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#HA"><span class="id" title="module">HA</span></a>.<br/>

<br/>
</div>

<div class="doc">
Conditions for <span class="inlinecode"><a class="idref" href="CegarTableaux.Solver.html#cegar_box_jumps"><span class="id" title="definition">cegar_box_jumps</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="JumpConds" class="idref" href="#JumpConds"><span class="id" title="module">JumpConds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="JumpConds.t" class="idref" href="#JumpConds.t"><span class="id" title="record">t</span></a> <a id="assumptions:56" class="idref" href="#assumptions:56"><span class="id" title="binder">assumptions</span></a> <a id="w0:57" class="idref" href="#w0:57"><span class="id" title="binder">w0</span></a> <a id="solver:58" class="idref" href="#solver:58"><span class="id" title="binder">solver</span></a> <a id="val:59" class="idref" href="#val:59"><span class="id" title="binder">val</span></a> <a id="hist:60" class="idref" href="#hist:60"><span class="id" title="binder">hist</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="JumpConds.attempts_from_solutions" class="idref" href="#JumpConds.attempts_from_solutions"><span class="id" title="projection">attempts_from_solutions</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#HA.attempts_from_solutions"><span class="id" title="definition">HA.attempts_from_solutions</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:60"><span class="id" title="variable">hist</span></a> (<a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:57"><span class="id" title="variable">w0</span></a>) <a class="idref" href="CegarTableaux.Solver.html#assumptions:56"><span class="id" title="variable">assumptions</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="JumpConds.solver_from_hist" class="idref" href="#JumpConds.solver_from_hist"><span class="id" title="projection">solver_from_hist</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#solver:58"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#HA.make_solver"><span class="id" title="definition">HA.make_solver</span></a> (<a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:57"><span class="id" title="variable">w0</span></a>) <a class="idref" href="CegarTableaux.Solver.html#hist:60"><span class="id" title="variable">hist</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="JumpConds.solver_sat_val" class="idref" href="#JumpConds.solver_sat_val"><span class="id" title="projection">solver_sat_val</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:59"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:58"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:56"><span class="id" title="variable">assumptions</span></a>;<br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#JumpConds"><span class="id" title="module">JumpConds</span></a>.<br/>

<br/>
</div>

<div class="doc">
Conditions for <span class="inlinecode"><a class="idref" href="CegarTableaux.Solver.html#cegar_box"><span class="id" title="definition">cegar_box</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="LocalConds" class="idref" href="#LocalConds"><span class="id" title="module">LocalConds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="LocalConds.t" class="idref" href="#LocalConds.t"><span class="id" title="record">t</span></a> <a id="assumptions:65" class="idref" href="#assumptions:65"><span class="id" title="binder">assumptions</span></a> <a id="phi:66" class="idref" href="#phi:66"><span class="id" title="binder">phi</span></a> <a id="solver:67" class="idref" href="#solver:67"><span class="id" title="binder">solver</span></a> <a id="hist:68" class="idref" href="#hist:68"><span class="id" title="binder">hist</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LocalConds.attempts_from_solutions" class="idref" href="#LocalConds.attempts_from_solutions"><span class="id" title="projection">attempts_from_solutions</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#HA.attempts_from_solutions"><span class="id" title="definition">HA.attempts_from_solutions</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:68"><span class="id" title="variable">hist</span></a> (<a class="idref" href="CegarTableaux.Solver.html#first_cpls"><span class="id" title="definition">first_cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:66"><span class="id" title="variable">phi</span></a>) <a class="idref" href="CegarTableaux.Solver.html#assumptions:65"><span class="id" title="variable">assumptions</span></a>;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="LocalConds.solver_from_hist" class="idref" href="#LocalConds.solver_from_hist"><span class="id" title="projection">solver_from_hist</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#solver:67"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#HA.make_solver"><span class="id" title="definition">HA.make_solver</span></a> (<a class="idref" href="CegarTableaux.Solver.html#first_cpls"><span class="id" title="definition">first_cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:66"><span class="id" title="variable">phi</span></a>) <a class="idref" href="CegarTableaux.Solver.html#hist:68"><span class="id" title="variable">hist</span></a>;<br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#LocalConds"><span class="id" title="module">LocalConds</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="hist_incl_solver" class="idref" href="#hist_incl_solver"><span class="id" title="lemma">hist_incl_solver</span></a> : <span class="id" title="keyword">forall</span> <a id="hist:72" class="idref" href="#hist:72"><span class="id" title="binder">hist</span></a> <a id="cnf:73" class="idref" href="#cnf:73"><span class="id" title="binder">cnf</span></a> <a id="assumptions:74" class="idref" href="#assumptions:74"><span class="id" title="binder">assumptions</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#attempts_from_solutions"><span class="id" title="definition">HA.attempts_from_solutions</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:72"><span class="id" title="variable">hist</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:73"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:74"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="definition">inclA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:72"><span class="id" title="variable">hist</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> (<a class="idref" href="CegarTableaux.Solver.html#make_solver"><span class="id" title="definition">HA.make_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:73"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:72"><span class="id" title="variable">hist</span></a>) <a class="idref" href="CegarTableaux.Solver.html#assumptions:74"><span class="id" title="variable">assumptions</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>, <a class="idref" href="CegarTableaux.Solver.html#make_solver_axioms"><span class="id" title="lemma">HA.make_solver_axioms</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">hist</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">Hafs</span>...<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hafs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hafs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hh_val</span> <span class="id" title="var">Ht_afs</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">val</span> <span class="id" title="var">Hval_in</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">InA_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hval_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hval_h</span> | <span class="id" title="var">Hval_t</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">InA_eqA</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">x</span> := <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <span class="id" title="var">h</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#failed_val_in_solver'_vals"><span class="id" title="lemma">failed_val_in_solver'_vals</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <span class="id" title="definition">inclA</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">Ht_afs</span> <span class="id" title="var">val</span> <span class="id" title="var">Hval_t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="CegarTableaux.CplSolver.html#same_atms_valuation_set"><span class="id" title="lemma">CplSolver.same_atms_valuation_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#PermutationA_inA"><span class="id" title="lemma">PermutationA_inA</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> (<a class="idref" href="CegarTableaux.Solver.html#make_solver"><span class="id" title="definition">HA.make_solver</span></a> <span class="id" title="var">cnf</span> <span class="id" title="var">t</span>) <span class="id" title="var">assumptions</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#same_atms_valuation_set"><span class="id" title="lemma">CplSolver.same_atms_valuation_set</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">CplSolver.add_conflict_set</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">CplSolver.axioms_ind</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_no_new_atms"><span class="id" title="lemma">CplSolver.add_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#val_subset_no_new_atms"><span class="id" title="lemma">val_subset_no_new_atms</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">val</span> := <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <span class="id" title="var">h</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A new valuation is not equal to any other valuation in the valuation history.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">extra_constraints</span></span> is required to strengthen the IH, creating a <span class="inlinecode"><span class="id" title="var">solver'</span></span>
    that is over-abstracted. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="new_val_not_in_hist_ind" class="idref" href="#new_val_not_in_hist_ind"><span class="id" title="lemma">new_val_not_in_hist_ind</span></a> : <span class="id" title="keyword">forall</span> <a id="hist:75" class="idref" href="#hist:75"><span class="id" title="binder">hist</span></a> <a id="cnf:76" class="idref" href="#cnf:76"><span class="id" title="binder">cnf</span></a> <a id="assumptions:77" class="idref" href="#assumptions:77"><span class="id" title="binder">assumptions</span></a> <a id="val:78" class="idref" href="#val:78"><span class="id" title="binder">val</span></a> <a id="extra_constraints:79" class="idref" href="#extra_constraints:79"><span class="id" title="binder">extra_constraints</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver:80" class="idref" href="#solver:80"><span class="id" title="binder">solver</span></a> := <a class="idref" href="CegarTableaux.Solver.html#make_solver"><span class="id" title="definition">HA.make_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:76"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:75"><span class="id" title="variable">hist</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver':81" class="idref" href="#solver':81"><span class="id" title="binder">solver'</span></a> := <span class="id" title="definition">List.fold_left</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause"><span class="id" title="axiom">CplSolver.add_clause</span></a> <a class="idref" href="CegarTableaux.Solver.html#extra_constraints:79"><span class="id" title="variable">extra_constraints</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:80"><span class="id" title="variable">solver</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#attempts_from_solutions"><span class="id" title="definition">HA.attempts_from_solutions</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:75"><span class="id" title="variable">hist</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:76"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:77"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:78"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver':81"><span class="id" title="variable">solver'</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:77"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <span class="id" title="inductive">InA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:78"><span class="id" title="variable">val</span></a> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:75"><span class="id" title="variable">hist</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">hist</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">IH</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">extra_constraints</span> <span class="id" title="var">solver</span> <span class="id" title="var">solver'</span> <span class="id" title="var">Hatts_from_sols</span> <span class="id" title="var">Hval</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">InA_nil</span>. }<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;split&nbsp;the&nbsp;solver&nbsp;into&nbsp;solver&nbsp;of&nbsp;tl&nbsp;then&nbsp;solver&nbsp;:=&nbsp;solvertl&nbsp;+&nbsp;clause&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">solvertl</span> := <a class="idref" href="CegarTableaux.Solver.html#make_solver"><span class="id" title="definition">HA.make_solver</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <span class="id" title="var">solvertl</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsolvertl</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#make_solver_axioms"><span class="id" title="lemma">HA.make_solver_axioms</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <span class="id" title="var">solver</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsolver</span>. { <span class="id" title="tactic">unfold</span> <span class="id" title="var">solver</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">CplSolver.axioms_ind</span></a>... }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <span class="id" title="var">solver'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsolver'</span>. { <span class="id" title="tactic">unfold</span> <span class="id" title="var">solver'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_fold_left"><span class="id" title="lemma">CplSolver.axioms_fold_left</span></a>... }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hval_in</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">List.map_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hval_in</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">InA_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hval_in</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hhd</span> | <span class="id" title="var">Htl</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;head&nbsp;cannot&nbsp;equal&nbsp;new&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.CplSolver.html#refined_solver_diff_val"><span class="id" title="lemma">CplSolver.refined_solver_diff_val</span></a> <span class="id" title="var">solvertl</span> <span class="id" title="var">assumptions</span> (<a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <span class="id" title="var">hd</span>) (<a class="idref" href="CegarTableaux.Solver.html#conflict_set"><span class="id" title="projection">HA.conflict_set</span></a> <span class="id" title="var">hd</span>) <span class="id" title="var">solver'</span> <span class="id" title="var">val</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsolvertl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsolver'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">hd</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> <span class="id" title="var">Hatts_from_sols</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">hd</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hcs_incl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">hd</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hcs_ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">solver'</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">CplSolver.add_conflict_set</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">extra_constraints</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause_cons"><span class="id" title="method">CplSolver.add_clause_cons</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.CplSolver.html#clauses_of_fold_left"><span class="id" title="lemma">CplSolver.clauses_of_fold_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">CplSolver.axioms_ind</span></a>... }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.in_app_iff</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_clause_cons"><span class="id" title="method">CplSolver.add_clause_cons</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">Hval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hhd</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;with&nbsp;extra&nbsp;constraint&nbsp;of&nbsp;the&nbsp;new&nbsp;clause.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> (<a class="idref" href="CegarTableaux.Solver.html#conflict_set"><span class="id" title="projection">HA.conflict_set</span></a> <span class="id" title="var">hd</span>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">extra_constraints</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hatts_from_sols</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> <span class="id" title="var">Hatts_from_sols</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hval</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> <span class="id" title="var">solvertl</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">solver'</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">CplSolver.add_conflict_set</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <a id="new_val_not_in_hist" class="idref" href="#new_val_not_in_hist"><span class="id" title="lemma">new_val_not_in_hist</span></a> : <span class="id" title="keyword">forall</span> <a id="hist:82" class="idref" href="#hist:82"><span class="id" title="binder">hist</span></a> <a id="cnf:83" class="idref" href="#cnf:83"><span class="id" title="binder">cnf</span></a> <a id="assumptions:84" class="idref" href="#assumptions:84"><span class="id" title="binder">assumptions</span></a> <a id="val:85" class="idref" href="#val:85"><span class="id" title="binder">val</span></a>,<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver:86" class="idref" href="#solver:86"><span class="id" title="binder">solver</span></a> := <a class="idref" href="CegarTableaux.Solver.html#make_solver"><span class="id" title="definition">HA.make_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:83"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:82"><span class="id" title="variable">hist</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:85"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:86"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:84"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#attempts_from_solutions"><span class="id" title="definition">HA.attempts_from_solutions</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:82"><span class="id" title="variable">hist</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:83"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:84"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <span class="id" title="inductive">InA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:85"><span class="id" title="variable">val</span></a> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:82"><span class="id" title="variable">hist</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hist</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">val</span> <span class="id" title="var">solver</span> <span class="id" title="var">Hval</span> <span class="id" title="var">Hafs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">extra_constraints</span> := @<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="CegarTableaux.CplClause.html#t"><span class="id" title="definition">CplClause.t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#new_val_not_in_hist_ind"><span class="id" title="lemma">new_val_not_in_hist_ind</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">extra_constraints</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">Hafs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <span class="id" title="var">solver</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hval</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="hist_nodup" class="idref" href="#hist_nodup"><span class="id" title="lemma">hist_nodup</span></a> : <span class="id" title="keyword">forall</span> <a id="hist:87" class="idref" href="#hist:87"><span class="id" title="binder">hist</span></a> <a id="cnf:88" class="idref" href="#cnf:88"><span class="id" title="binder">cnf</span></a> <a id="assumptions:89" class="idref" href="#assumptions:89"><span class="id" title="binder">assumptions</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#attempts_from_solutions"><span class="id" title="definition">HA.attempts_from_solutions</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:87"><span class="id" title="variable">hist</span></a> <a class="idref" href="CegarTableaux.Solver.html#cnf:88"><span class="id" title="variable">cnf</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:89"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">NoDupA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:87"><span class="id" title="variable">hist</span></a>).<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">hist</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">t</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">Hafs</span>...<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hafs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hh_val</span> <span class="id" title="var">Ht_afs</span>].<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="constructor">NoDupA_cons</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#new_val_not_in_hist"><span class="id" title="lemma">new_val_not_in_hist</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">with</span> <span class="id" title="var">cnf</span> <span class="id" title="var">assumptions</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab7"></a><h1 class="section">Measurement</h1>

<div class="paragraph"> </div>

 Lexicographic ordering of a pair of naturals. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="lexnat2_lt" class="idref" href="#lexnat2_lt"><span class="id" title="definition">lexnat2_lt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="inductive">slexprod</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="CegarTableaux.Solver.html#lexnat2_lt"><span class="id" title="definition">lexnat2_lt</span></a></span> is well-founded. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="lexnat2_lt_wf" class="idref" href="#lexnat2_lt_wf"><span class="id" title="lemma">lexnat2_lt_wf</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="CegarTableaux.Solver.html#lexnat2_lt"><span class="id" title="definition">lexnat2_lt</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat2_lt"><span class="id" title="definition">lexnat2_lt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">wf_slexprod</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Wf_nat.lt_wf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sub_S_lt" class="idref" href="#sub_S_lt"><span class="id" title="lemma">sub_S_lt</span></a> : <span class="id" title="keyword">forall</span> (<a id="n:90" class="idref" href="#n:90"><span class="id" title="binder">n</span></a> <a id="m:91" class="idref" href="#m:91"><span class="id" title="binder">m</span></a> <a id="r:92" class="idref" href="#r:92"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="CegarTableaux.Solver.html#n:90"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#m:91"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#r:92"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#m:91"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#n:90"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="CegarTableaux.Solver.html#r:92"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#m:91"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="CegarTableaux.Solver.html#r:92"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">lia</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Default auto-solver simplifies a bit too much. 
</div>
<div class="code">
<span class="id" title="keyword">Local Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span> ].<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">CEGARBox implementation and proof</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="cegar_box_jumps" class="idref" href="#cegar_box_jumps"><span class="id" title="definition">cegar_box_jumps</span></a><br/>
&nbsp;&nbsp;(<a id="assumptions:93" class="idref" href="#assumptions:93"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="w0:94" class="idref" href="#w0:94"><span class="id" title="binder">w0</span></a> : <a class="idref" href="CegarTableaux.Lclauses.html#t"><span class="id" title="record">Lclauses.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="tail:95" class="idref" href="#tail:95"><span class="id" title="binder">tail</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="solver:96" class="idref" href="#solver:96"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">CplSolver.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="valuation:97" class="idref" href="#valuation:97"><span class="id" title="binder">valuation</span></a> : <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="dias:98" class="idref" href="#dias:98"><span class="id" title="binder">dias</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.DiaClause.html#t"><span class="id" title="definition">DiaClause.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="hist:99" class="idref" href="#hist:99"><span class="id" title="binder">hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="record">HA.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="conds:100" class="idref" href="#conds:100"><span class="id" title="binder">conds</span></a> : <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="record">JumpConds.t</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:93"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:96"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:99"><span class="id" title="variable">hist</span></a>)<br/>
&nbsp;&nbsp;(<a id="cegar_box:106" class="idref" href="#cegar_box:106"><span class="id" title="binder">cegar_box</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="inp_assumps:101" class="idref" href="#inp_assumps:101"><span class="id" title="binder">inp_assumps</span></a> <a id="inp_phi:102" class="idref" href="#inp_phi:102"><span class="id" title="binder">inp_phi</span></a> <a id="inp_solver:103" class="idref" href="#inp_solver:103"><span class="id" title="binder">inp_solver</span></a> <a id="inp_hist:104" class="idref" href="#inp_hist:104"><span class="id" title="binder">inp_hist</span></a> (<a id="inp_localconds:105" class="idref" href="#inp_localconds:105"><span class="id" title="binder">inp_localconds</span></a> : <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="record">LocalConds.t</span></a> <a class="idref" href="CegarTableaux.Solver.html#inp_assumps:101"><span class="id" title="variable">inp_assumps</span></a> <a class="idref" href="CegarTableaux.Solver.html#inp_phi:102"><span class="id" title="variable">inp_phi</span></a> <a class="idref" href="CegarTableaux.Solver.html#inp_solver:103"><span class="id" title="variable">inp_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#inp_hist:104"><span class="id" title="variable">inp_hist</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#lexnat2_lt"><span class="id" title="definition">lexnat2_lt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">List.length</span> <a class="idref" href="CegarTableaux.Solver.html#inp_phi:102"><span class="id" title="variable">inp_phi</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>    <span class="id" title="abbreviation">List.length</span> (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#inp_solver:103"><span class="id" title="variable">inp_solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#inp_assumps:101"><span class="id" title="variable">inp_assumps</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="abbreviation">List.length</span> <a class="idref" href="CegarTableaux.Solver.html#inp_hist:104"><span class="id" title="variable">inp_hist</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">List.length</span> (<a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="CegarTableaux.Solver.html#tail:95"><span class="id" title="variable">tail</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="abbreviation">List.length</span> (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:96"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:93"><span class="id" title="variable">assumptions</span></a>)     <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="abbreviation">List.length</span> <a class="idref" href="CegarTableaux.Solver.html#hist:99"><span class="id" title="variable">hist</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a><br/>
&nbsp;&nbsp;)<br/>
&nbsp;&nbsp;{<span class="id" title="keyword">struct</span> <span class="id" title="var">dias</span>}<br/>
&nbsp;&nbsp;: <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#dias:98"><span class="id" title="variable">dias</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;more&nbsp;dia-clauses:&nbsp;every&nbsp;diamond&nbsp;has&nbsp;been&nbsp;fulfilled,&nbsp;SAT&nbsp;base&nbsp;case.&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;extra&nbsp;clauses&nbsp;and&nbsp;extra&nbsp;dias&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">dias'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="clause_is_fired:109" class="idref" href="#clause_is_fired:109"><span class="id" title="binder">clause_is_fired</span></a> := <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">c</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#clause_is_fired:109"><span class="id" title="variable">clause_is_fired</span></a> <span class="id" title="keyword">with</span>  <span class="comment">(*&nbsp;if&nbsp;statements&nbsp;are&nbsp;more&nbsp;complicated&nbsp;when&nbsp;proving&nbsp;obligations&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;unfired&nbsp;dia&nbsp;clause:&nbsp;just&nbsp;go&nbsp;to&nbsp;next&nbsp;dia&nbsp;clause&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;recursion:&nbsp;NEXT&nbsp;UNFIRED&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box_jumps:107"><span class="id" title="definition">cegar_box_jumps</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:93"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:95"><span class="id" title="variable">tail</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:96"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">dias'</span> <a class="idref" href="CegarTableaux.Solver.html#hist:99"><span class="id" title="variable">hist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CegarTableaux.Solver.html#cegar_box:106"><span class="id" title="variable">cegar_box</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;this&nbsp;clause&nbsp;has&nbsp;been&nbsp;fired.&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;could&nbsp;make&nbsp;this&nbsp;an&nbsp;input&nbsp;to&nbsp;the&nbsp;function?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="fired_box_clauses:112" class="idref" href="#fired_box_clauses:112"><span class="id" title="binder">fired_box_clauses</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;for&nbsp;each&nbsp;box&nbsp;clause&nbsp;a&nbsp;-&gt;&nbsp;<span class="inlinecode"></span>b,&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Lclauses.html#boxes"><span class="id" title="projection">Lclauses.boxes</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;filter&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">a</span></span>&nbsp;(fst&nbsp;box)&nbsp;in&nbsp;the&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:111" class="idref" href="#box:111"><span class="id" title="binder">box</span></a> =&gt; <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:111"><span class="id" title="variable">box</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="fired_box_lits:113" class="idref" href="#fired_box_lits:113"><span class="id" title="binder">fired_box_lits</span></a> := <span class="id" title="abbreviation">List.map</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CegarTableaux.Solver.html#fired_box_clauses:112"><span class="id" title="variable">fired_box_clauses</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="next_cpls:114" class="idref" href="#next_cpls:114"><span class="id" title="binder">next_cpls</span></a> := <a class="idref" href="CegarTableaux.Solver.html#first_cpls"><span class="id" title="definition">first_cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:95"><span class="id" title="variable">tail</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;recursion:&nbsp;JUMP&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="jump:115" class="idref" href="#jump:115"><span class="id" title="binder">jump</span></a> := <a class="idref" href="CegarTableaux.Solver.html#cegar_box:106"><span class="id" title="variable">cegar_box</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CegarTableaux.Solver.html#fired_box_lits:113"><span class="id" title="variable">fired_box_lits</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#tail:95"><span class="id" title="variable">tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">CplSolver.make_with_clauses</span></a> <a class="idref" href="CegarTableaux.Solver.html#next_cpls:114"><span class="id" title="variable">next_cpls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[]</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#jump:115"><span class="id" title="variable">jump</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;JUMP&nbsp;success:&nbsp;continue&nbsp;with&nbsp;next&nbsp;dia&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;recursion:&nbsp;NEXT&nbsp;FIRED&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box_jumps:107"><span class="id" title="definition">cegar_box_jumps</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:93"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:95"><span class="id" title="variable">tail</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:96"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">dias'</span> <a class="idref" href="CegarTableaux.Solver.html#hist:99"><span class="id" title="variable">hist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CegarTableaux.Solver.html#cegar_box:106"><span class="id" title="variable">cegar_box</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;JUMP&nbsp;fail:&nbsp;RESTART&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.Solver.html#Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <span class="id" title="var">core</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;conflict&nbsp;set:&nbsp;all&nbsp;names&nbsp;that&nbsp;fired&nbsp;some&nbsp;literal&nbsp;in&nbsp;the&nbsp;core&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="conflict_set:117" class="idref" href="#conflict_set:117"><span class="id" title="binder">conflict_set</span></a> := <a class="idref" href="CegarTableaux.Solver.html#conflict_set_of"><span class="id" title="definition">conflict_set_of</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">c</span> <span class="id" title="var">core</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;conflict_set&nbsp;is&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;conjunction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;negate&nbsp;the&nbsp;whole&nbsp;thing&nbsp;to&nbsp;become&nbsp;a&nbsp;cpl&nbsp;clause,&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;disjunction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver:118" class="idref" href="#solver:118"><span class="id" title="binder">solver</span></a> := <a class="idref" href="CegarTableaux.CplSolver.html#add_conflict_set"><span class="id" title="definition">CplSolver.add_conflict_set</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:96"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:117"><span class="id" title="variable">conflict_set</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;recursion:&nbsp;RESTART&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box:106"><span class="id" title="variable">cegar_box</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:93"><span class="id" title="variable">assumptions</span></a> (<a class="idref" href="CegarTableaux.Solver.html#w0:94"><span class="id" title="variable">w0</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="CegarTableaux.Solver.html#tail:95"><span class="id" title="variable">tail</span></a>) <a class="idref" href="CegarTableaux.Solver.html#solver:118"><span class="id" title="variable">solver</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="CegarTableaux.Solver.html#make"><span class="id" title="constructor">HA.make</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:97"><span class="id" title="variable">valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:117"><span class="id" title="variable">conflict_set</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)::</span></a><a class="idref" href="CegarTableaux.Solver.html#hist:99"><span class="id" title="variable">hist</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
</div>

<div class="doc">
Conditions met for above recursion. 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">next_cpls</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
Recursion JUMP: tail decreasing 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
Recursion RESTART: valid valuation attempt: conflict set non-empty 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">conflict_set</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.nil_cons</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
valid valuation attempt: conflict set subset of valuation 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set_incl_val"><span class="id" title="lemma">conflict_set_incl_val</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">solver</span>:=<span class="id" title="var">solver0</span>) (<span class="id" title="var">assumptions</span>:=<span class="id" title="var">assumptions</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">conds</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#make_solver_axioms"><span class="id" title="lemma">HA.make_solver_axioms</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">conds</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">solver_sat_val</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
Conditions met for RESTART. 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">conds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <span class="id" title="var">solver0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsolver</span>. { <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#make_solver_axioms"><span class="id" title="lemma">HA.make_solver_axioms</span></a>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">solver</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">CplSolver.make_with_clauses</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
RESTART decreasing: tail equal, possible valuations decreasing 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;actually&nbsp;hard&nbsp;part&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">conds</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="CegarTableaux.CplSolver.html#solver_axioms"><span class="id" title="class">CplSolver.solver_axioms</span></a> <span class="id" title="var">solver0</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsolver0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#make_solver_axioms"><span class="id" title="lemma">HA.make_solver_axioms</span></a>. }<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#sub_S_lt"><span class="id" title="lemma">sub_S_lt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Every&nbsp;possible&nbsp;valuation&nbsp;of&nbsp;solver&nbsp;and&nbsp;solver0&nbsp;are&nbsp;equal.&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">solver</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#PermutationA_length"><span class="id" title="lemma">PermutationA_length</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">eqA</span> := <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#same_atms_valuation_set"><span class="id" title="lemma">CplSolver.same_atms_valuation_set</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#axioms_ind"><span class="id" title="axiom">CplSolver.axioms_ind</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#add_no_new_atms"><span class="id" title="lemma">CplSolver.add_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#learned_clause_no_new_atms"><span class="id" title="lemma">learned_clause_no_new_atms</span></a>...<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Valuation&nbsp;history&nbsp;must&nbsp;be&nbsp;strictly&nbsp;less&nbsp;than&nbsp;every&nbsp;possible&nbsp;valuation.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode">&lt;=</span>&nbsp;is&nbsp;easy.&nbsp;Prove&nbsp;<span class="inlinecode">&lt;&gt;</span>&nbsp;by&nbsp;contradiction.&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Nat.le_neq</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">List.length_map</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span>:=<a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#NoDupA_incl_length"><span class="id" title="lemma">NoDupA_incl_length</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">eqA</span> := <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">eapply</span> <a class="idref" href="CegarTableaux.Solver.html#hist_nodup"><span class="id" title="lemma">hist_nodup</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">attempts_from_solutions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#hist_incl_solver"><span class="id" title="lemma">hist_incl_solver</span></a>...<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;length&nbsp;val&nbsp;hist&nbsp;<span class="inlinecode">&lt;&gt;</span>&nbsp;length&nbsp;every&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="lemma">List.length_map</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span>:=<a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;assume&nbsp;length&nbsp;val&nbsp;hist&nbsp;=&nbsp;length&nbsp;every&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;then&nbsp;val&nbsp;hist&nbsp;is&nbsp;a&nbsp;permutation&nbsp;of&nbsp;every&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="inductive">PermutationA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> (<span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Solver.html#failed_val"><span class="id" title="projection">HA.failed_val</span></a> <span class="id" title="var">hist</span>) (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <span class="id" title="var">solver0</span> <span class="id" title="var">assumptions</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#NoDup_PermutationA_bis"><span class="id" title="lemma">NoDup_PermutationA_bis</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="CegarTableaux.Solver.html#hist_nodup"><span class="id" title="lemma">hist_nodup</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">attempts_from_solutions</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#every_valuation_nodup"><span class="id" title="lemma">CplSolver.every_valuation_nodup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Nat.eq_le_incl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlength</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#hist_incl_solver"><span class="id" title="lemma">hist_incl_solver</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;contradiction&nbsp;by&nbsp;showing&nbsp;that&nbsp;valuation&nbsp;must&nbsp;be&nbsp;in&nbsp;val&nbsp;hist,&nbsp;but&nbsp;we&nbsp;assumed&nbsp;it&nbsp;isn't&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.Solver.html#new_val_not_in_hist"><span class="id" title="lemma">new_val_not_in_hist</span></a> <span class="id" title="var">hist</span> (<a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <span class="id" title="var">w0</span>) <span class="id" title="var">assumptions</span> <span class="id" title="var">valuation</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span> <span class="id" title="var">solver0</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">solver_sat_val</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#PermutationA_inA"><span class="id" title="lemma">PermutationA_inA</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <span class="id" title="var">solver0</span> <span class="id" title="var">assumptions</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.CplSolver.html#valuation_in_every_valuation_of"><span class="id" title="lemma">CplSolver.valuation_in_every_valuation_of</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="cegar_box" class="idref" href="#cegar_box"><span class="id" title="definition">cegar_box</span></a><br/>
&nbsp;&nbsp;(<a id="assumptions:119" class="idref" href="#assumptions:119"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="phi:120" class="idref" href="#phi:120"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="solver:121" class="idref" href="#solver:121"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.CplSolver.html#t"><span class="id" title="axiom">CplSolver.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="hist:122" class="idref" href="#hist:122"><span class="id" title="binder">hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="record">HA.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="conds:123" class="idref" href="#conds:123"><span class="id" title="binder">conds</span></a> : <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="record">LocalConds.t</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:119"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:120"><span class="id" title="variable">phi</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:121"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#hist:122"><span class="id" title="variable">hist</span></a>)<br/>
&nbsp;&nbsp;{<span class="id" title="keyword">measure</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> <span class="id" title="var">phi</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;remaining&nbsp;number&nbsp;of&nbsp;possible&nbsp;valuations&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> (<a class="idref" href="CegarTableaux.CplSolver.html#every_valuation"><span class="id" title="definition">CplSolver.every_valuation</span></a> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="abbreviation">List.length</span> <span class="id" title="var">hist</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="CegarTableaux.Solver.html#lexnat2_lt"><span class="id" title="definition">lexnat2_lt</span></a>}<br/>
<br/>
&nbsp;&nbsp;: <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.CplSolver.html#solve_with_assumptions"><span class="id" title="axiom">CplSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:121"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:119"><span class="id" title="variable">assumptions</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;UNSAT&nbsp;base&nbsp;case:&nbsp;a&nbsp;subset&nbsp;is&nbsp;unsat&nbsp;-&gt;&nbsp;whole&nbsp;thing&nbsp;must&nbsp;be&nbsp;unsat.&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.CplSolver.Solution.html#Unsat"><span class="id" title="constructor">CplSolver.Solution.Unsat</span></a> <span class="id" title="var">core</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <span class="id" title="var">core</span><br/>
&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.CplSolver.Solution.html#Sat"><span class="id" title="constructor">CplSolver.Solution.Sat</span></a> <span class="id" title="var">valuation</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#phi:120"><span class="id" title="variable">phi</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;more&nbsp;dia&nbsp;clauses,&nbsp;don't&nbsp;need&nbsp;to&nbsp;recurse&nbsp;to&nbsp;the&nbsp;next&nbsp;world.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;any&nbsp;fired&nbsp;box&nbsp;clauses&nbsp;would&nbsp;be&nbsp;trivially&nbsp;satisfiable&nbsp;by&nbsp;non-existence&nbsp;of&nbsp;next&nbsp;world.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tail</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box_jumps"><span class="id" title="definition">cegar_box_jumps</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:119"><span class="id" title="variable">assumptions</span></a> <span class="id" title="var">w0</span> <span class="id" title="var">tail</span> <a class="idref" href="CegarTableaux.Solver.html#solver:121"><span class="id" title="variable">solver</span></a> <span class="id" title="var">valuation</span> (<a class="idref" href="CegarTableaux.Lclauses.html#dias"><span class="id" title="projection">Lclauses.dias</span></a> <span class="id" title="var">w0</span>) <a class="idref" href="CegarTableaux.Solver.html#hist:122"><span class="id" title="variable">hist</span></a> <span class="id" title="var">_</span> <a class="idref" href="CegarTableaux.Solver.html#cegar_box:124"><span class="id" title="definition">cegar_box</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
</div>

<div class="doc">
Recursion conditions met 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">phi</span> <span class="id" title="var">filtered_var</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">conds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
Definition of cegar_box matches the type def in cegar_box_jumps 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">phi</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>

<div class="doc">
lexnat2_lt is well founded 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Program.Wf.html#MR"><span class="id" title="definition">MR</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">wf_inverse_image</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat2_lt_wf"><span class="id" title="lemma">lexnat2_lt_wf</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Solve a formula by applying <span class="inlinecode"><a class="idref" href="CegarTableaux.Solver.html#cegar_box"><span class="id" title="definition">cegar_box</span></a></span> with the correct arguments. 
</div>
<div class="code">
<span class="id" title="keyword">Program Definition</span> <a id="solve_mchain" class="idref" href="#solve_mchain"><span class="id" title="definition">solve_mchain</span></a> (<a id="phi:126" class="idref" href="#phi:126"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>) : <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cpls:127" class="idref" href="#cpls:127"><span class="id" title="binder">cpls</span></a> := <a class="idref" href="CegarTableaux.Solver.html#first_cpls"><span class="id" title="definition">first_cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:126"><span class="id" title="variable">phi</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box"><span class="id" title="definition">cegar_box</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="CegarTableaux.Solver.html#phi:126"><span class="id" title="variable">phi</span></a> (<a class="idref" href="CegarTableaux.CplSolver.html#make_with_clauses"><span class="id" title="definition">CplSolver.make_with_clauses</span></a> <a class="idref" href="CegarTableaux.Solver.html#cpls:127"><span class="id" title="variable">cpls</span></a>) <span class="id" title="notation">[]</span> <span class="id" title="var">_</span>.<br/>
</div>

<div class="doc">
Base cases hold. 
</div>
<div class="code">
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">cpls</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Solve a <span class="inlinecode"><span class="id" title="var">Fml.t</span></span> formula by converting first. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="solve_fml" class="idref" href="#solve_fml"><span class="id" title="definition">solve_fml</span></a> (<a id="phi:128" class="idref" href="#phi:128"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Fml.html#t"><span class="id" title="inductive">Fml.t</span></a>) : <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#phi:128"><span class="id" title="variable">phi</span></a> <a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="CegarTableaux.Nnf.html#from_fml"><span class="id" title="definition">Nnf.from_fml</span></a> <a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="CegarTableaux.Mcnf.html#from_nnf"><span class="id" title="definition">Mcnf.from_nnf</span></a> <a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="CegarTableaux.Mchain.html#from_mcnf"><span class="id" title="definition">Mchain.from_mcnf</span></a> <a class="idref" href="CegarTableaux.Utils.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#solve_mchain"><span class="id" title="definition">solve_mchain</span></a>.<br/>

<br/>
</div>

<div class="doc">
Show the assumptions we made with <span class="inlinecode"><span class="id" title="keyword">Print</span></span> <span class="inlinecode"><span class="id" title="keyword">Assumptions</span></span> <span class="inlinecode"><a class="idref" href="CegarTableaux.Solver.html#solve_fml"><span class="id" title="definition">solve_fml</span></a>.</span>. This outputs:

<div class="paragraph"> </div>

    <br/>
<span class="inlinecode"><span class="id" title="keyword">Axioms</span>:<br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.t</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Type</span><br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.solve_with_assumptions</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CplSolver.t</span> -&gt; <span class="id" title="var">Assumptions.t</span> -&gt; <span class="id" title="var">CplSolver.Solution.t</span><br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.make</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;() -&gt; <span class="id" title="var">CplSolver.t</span><br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.clauses_of</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CplSolver.t</span> -&gt; <span class="id" title="var">Cnf.t</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Classical_Prop.classic</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> \/ ~ <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.axioms_make</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CplSolver.solver_axioms</span> (<span class="id" title="var">CplSolver.make</span> ())<br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.axioms_ind</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">solver</span> : <span class="id" title="var">CplSolver.t</span>) (<span class="id" title="var">clause</span> : <span class="id" title="var">CplClause.t</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CplSolver.solver_axioms</span> <span class="id" title="var">solver</span> -&gt; <span class="id" title="var">CplSolver.solver_axioms</span> (<span class="id" title="var">CplSolver.add_clause</span> <span class="id" title="var">solver</span> <span class="id" title="var">clause</span>)<br/>
&nbsp;&nbsp;<span class="id" title="var">CplSolver.add_clause</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CplSolver.t</span> -&gt; <span class="id" title="var">CplClause.t</span> -&gt; <span class="id" title="var">CplSolver.t</span>
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

<a id="lab9"></a><h1 class="section">Future Work</h1>


<div class="paragraph"> </div>

    Soundness and completeness are unfinished. These theorems would look like:

<div class="paragraph"> </div>

    <br/>
<span class="inlinecode"><span class="id" title="keyword">Theorem</span> <span class="id" title="var">soundness</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Mchain.t</span>), <span class="id" title="var">cegarbox</span> <span class="id" title="var">phi</span> = <span class="id" title="var">Solution.Sat</span> -&gt; <span class="id" title="var">Mchain.satisfiable</span> <span class="id" title="var">phi</span>.<br/>
<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">completeness</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">phi</span> : <span class="id" title="var">Mchain.t</span>), <span class="id" title="var">Mchain.satisfiable</span> <span class="id" title="var">phi</span> -&gt; <span class="id" title="var">cegarbox</span> <span class="id" title="var">phi</span> = <span class="id" title="var">Solution.Sat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;
<div class="paragraph"> </div>

</span>
<div class="paragraph"> </div>

    The type of <span class="inlinecode"><span class="id" title="var">Solution.t</span></span> would likely need to change though. 
</div>
<div class="code">
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a
    href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
