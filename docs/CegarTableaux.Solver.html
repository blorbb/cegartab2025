<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>CegarTableaux.Solver</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">CegarTableaux.Solver</h1>

<div class="code">
<span class="comment">(*<br/>
CEGAR-BOX&nbsp;SAT&nbsp;solver.<br/>
<br/>
We&nbsp;make&nbsp;heavy&nbsp;use&nbsp;of&nbsp;Program&nbsp;Fixpoint/Definition.<br/>
<br/>
Program&nbsp;Fixpoint&nbsp;allows&nbsp;us&nbsp;to&nbsp;prove&nbsp;that&nbsp;a&nbsp;fixpoint&nbsp;terminates&nbsp;with&nbsp;a&nbsp;custom<br/>
well-founded&nbsp;measurement,&nbsp;and&nbsp;generates&nbsp;obligations&nbsp;to&nbsp;show&nbsp;that&nbsp;every<br/>
recursive&nbsp;call&nbsp;is&nbsp;indeed&nbsp;a&nbsp;strict&nbsp;decrease&nbsp;of&nbsp;the&nbsp;measurement.<br/>
<br/>
We&nbsp;use&nbsp;a&nbsp;Notation&nbsp;for&nbsp;the&nbsp;mutually&nbsp;recursive&nbsp;<span class="inlinecode"><span class="id" title="var">cegar_box_rec</span></span>.&nbsp;This&nbsp;is&nbsp;because<br/>
we&nbsp;need&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;see&nbsp;'through'&nbsp;this&nbsp;function&nbsp;to&nbsp;the&nbsp;actual&nbsp;<span class="inlinecode"><span class="id" title="var">process_dias</span></span><br/>
recursive&nbsp;call.&nbsp;This&nbsp;way,&nbsp;we&nbsp;can&nbsp;actually&nbsp;prove&nbsp;that&nbsp;this&nbsp;recursive&nbsp;call<br/>
is&nbsp;decreasing.&nbsp;A&nbsp;let&nbsp;statement&nbsp;or&nbsp;Definition&nbsp;might&nbsp;work,&nbsp;but&nbsp;requires&nbsp;writing<br/>
some&nbsp;really&nbsp;big&nbsp;types&nbsp;which&nbsp;is&nbsp;annoying.<br/>
<br/>
Program&nbsp;also&nbsp;allows&nbsp;us&nbsp;to&nbsp;leave&nbsp;'holes'&nbsp;in&nbsp;places&nbsp;where&nbsp;propositions&nbsp;are&nbsp;expected.<br/>
We&nbsp;can&nbsp;then&nbsp;fill&nbsp;in&nbsp;these&nbsp;holes&nbsp;as&nbsp;obligations,&nbsp;so&nbsp;that&nbsp;we&nbsp;can&nbsp;actually<br/>
use&nbsp;the&nbsp;proof&nbsp;language&nbsp;rather&nbsp;than&nbsp;trying&nbsp;to&nbsp;do&nbsp;some&nbsp;stuff&nbsp;with&nbsp;function&nbsp;application.<br/>
*)</span><br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="library">List</span> <span class="id" title="library">SetoidList</span> <span class="id" title="library">SetoidPermutation</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="module">List.ListNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Relations</span> <span class="id" title="library">Program</span> <span class="id" title="library">Wellfounded</span> <span class="id" title="library">Lia</span> <span class="id" title="library">RelationClasses</span> <span class="id" title="library">Permutation</span> <span class="id" title="library">FunInd</span> <span class="id" title="library">Recdef</span> <span class="id" title="library">PeanoNat</span> <span class="id" title="library">Nat</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux</span> <span class="id" title="keyword">Require</span> <a class="idref" href="CegarTableaux.SatSolver.html#"><span class="id" title="library">SatSolver</span></a> <a class="idref" href="CegarTableaux.Lit.html#"><span class="id" title="library">Lit</span></a> <a class="idref" href="CegarTableaux.Mchain.html#"><span class="id" title="library">Mchain</span></a> <a class="idref" href="CegarTableaux.Assumptions.html#"><span class="id" title="library">Assumptions</span></a> <a class="idref" href="CegarTableaux.Valuation.html#"><span class="id" title="library">Valuation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">CegarTableaux</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="CegarTableaux.Utils.html#"><span class="id" title="library">Utils</span></a> <a class="idref" href="CegarTableaux.ListExt.html#"><span class="id" title="library">ListExt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Solution" class="idref" href="#Solution"><span class="id" title="module">Solution</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="Solution.t" class="idref" href="#Solution.t"><span class="id" title="definition, inductive"><span id="Solution.t_rect" class="id"><span id="Solution.t_ind" class="id"><span id="Solution.t_rec" class="id"><span id="Solution.t_sind" class="id">t</span></span></span></span></span></a> : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Solution.Sat" class="idref" href="#Solution.Sat"><span class="id" title="constructor">Sat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="Solution.Unsat" class="idref" href="#Solution.Unsat"><span class="id" title="constructor">Unsat</span></a> (<a id="core:3" class="idref" href="#core:3"><span class="id" title="binder">core</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>).<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#Solution"><span class="id" title="module">Solution</span></a>.<br/>

<br/>
</div>

<div class="doc">
Function pipeline operator 
</div>
<div class="code">
<span class="id" title="keyword">Local Definition</span> <a id="apply" class="idref" href="#apply"><span class="id" title="definition">apply</span></a> {<a id="A:4" class="idref" href="#A:4"><span class="id" title="binder">A</span></a> <a id="B:5" class="idref" href="#B:5"><span class="id" title="binder">B</span></a>} (<a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a> : <a class="idref" href="CegarTableaux.Solver.html#A:4"><span class="id" title="variable">A</span></a>) (<a id="f:7" class="idref" href="#f:7"><span class="id" title="binder">f</span></a> : <a class="idref" href="CegarTableaux.Solver.html#A:4"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#B:5"><span class="id" title="variable">B</span></a>) := <a class="idref" href="CegarTableaux.Solver.html#f:7"><span class="id" title="variable">f</span></a> <a class="idref" href="CegarTableaux.Solver.html#x:6"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Local Infix</span> <a id="53407782e708e33cf564f4172e0ae9a0" class="idref" href="#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">&quot;</span></a>|&gt;" := <a class="idref" href="CegarTableaux.Solver.html#apply"><span class="id" title="definition">apply</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 51, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
</div>

<div class="doc">
Lexicographic ordering of a triple. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="lexnat3_lt" class="idref" href="#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="inductive">slexprod</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="inductive">slexprod</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lexnat3_lt_wf" class="idref" href="#lexnat3_lt_wf"><span class="id" title="lemma">lexnat3_lt_wf</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Wf.html#well_founded"><span class="id" title="definition">well_founded</span></a> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">wf_slexprod</span>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Wf_nat.lt_wf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sub_S_lt" class="idref" href="#sub_S_lt"><span class="id" title="lemma">sub_S_lt</span></a> : <span class="id" title="keyword">forall</span> (<a id="n:8" class="idref" href="#n:8"><span class="id" title="binder">n</span></a> <a id="m:9" class="idref" href="#m:9"><span class="id" title="binder">m</span></a> <a id="r:10" class="idref" href="#r:10"><span class="id" title="binder">r</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <a class="idref" href="CegarTableaux.Solver.html#n:8"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#m:9"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#r:10"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#n:8"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#n:8"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="CegarTableaux.Solver.html#r:10"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#m:9"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="CegarTableaux.Solver.html#r:10"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="InA_eqA" class="idref" href="#InA_eqA"><span class="id" title="lemma">InA_eqA</span></a> {<a id="A:11" class="idref" href="#A:11"><span class="id" title="binder">A</span></a>} {<a id="eqA:12" class="idref" href="#eqA:12"><span class="id" title="binder">eqA</span></a>} : <span class="id" title="keyword">forall</span> (<a id="x:13" class="idref" href="#x:13"><span class="id" title="binder">x</span></a> <a id="y:14" class="idref" href="#y:14"><span class="id" title="binder">y</span></a> : <a class="idref" href="CegarTableaux.Solver.html#A:11"><span class="id" title="variable">A</span></a>) (<a id="l:15" class="idref" href="#l:15"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#A:11"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#eqA:12"><span class="id" title="variable">eqA</span></a> <a class="idref" href="CegarTableaux.Solver.html#x:13"><span class="id" title="variable">x</span></a> <a class="idref" href="CegarTableaux.Solver.html#y:14"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">Equivalence</span></a> <a class="idref" href="CegarTableaux.Solver.html#eqA:12"><span class="id" title="variable">eqA</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">SetoidList.InA</span> <a class="idref" href="CegarTableaux.Solver.html#eqA:12"><span class="id" title="variable">eqA</span></a> <a class="idref" href="CegarTableaux.Solver.html#x:13"><span class="id" title="variable">x</span></a> <a class="idref" href="CegarTableaux.Solver.html#l:15"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <span class="id" title="inductive">SetoidList.InA</span> <a class="idref" href="CegarTableaux.Solver.html#eqA:12"><span class="id" title="variable">eqA</span></a> <a class="idref" href="CegarTableaux.Solver.html#y:14"><span class="id" title="variable">y</span></a> <a class="idref" href="CegarTableaux.Solver.html#l:15"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span> <span class="id" title="var">HeqA_xy</span> <span class="id" title="var">HeqA_trans</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">SetoidList.InA_alt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">z</span> [<span class="id" title="var">HeqA_xz</span> <span class="id" title="var">Hin</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqA_xy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">x</span>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">z</span> [<span class="id" title="var">HeqA_yz</span> <span class="id" title="var">Hin</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">split</span>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> <span class="id" title="var">y</span>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Definition&nbsp;conflict_set_of&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="conflict_set_no_new_atms" class="idref" href="#conflict_set_no_new_atms"><span class="id" title="lemma">conflict_set_no_new_atms</span></a> : <span class="id" title="keyword">forall</span> <a id="w0:16" class="idref" href="#w0:16"><span class="id" title="binder">w0</span></a> <a id="solver:17" class="idref" href="#solver:17"><span class="id" title="binder">solver</span></a> <a id="assumptions:18" class="idref" href="#assumptions:18"><span class="id" title="binder">assumptions</span></a> <a id="solver_val:19" class="idref" href="#solver_val:19"><span class="id" title="binder">solver_val</span></a> <a id="c:20" class="idref" href="#c:20"><span class="id" title="binder">c</span></a> <a id="core:21" class="idref" href="#core:21"><span class="id" title="binder">core</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.SatSolver.html#solver_axioms"><span class="id" title="class">SatSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:17"><span class="id" title="variable">solver</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.SatSolver.html#Solution.Sat"><span class="id" title="constructor">SatSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver_val:19"><span class="id" title="variable">solver_val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.SatSolver.html#solve_with_assumptions"><span class="id" title="axiom">SatSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:17"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:18"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver_val:19"><span class="id" title="variable">solver_val</span></a> <a class="idref" href="CegarTableaux.Solver.html#c:20"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="fired_box_clauses:23" class="idref" href="#fired_box_clauses:23"><span class="id" title="binder">fired_box_clauses</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Lclauses.html#boxes"><span class="id" title="projection">Lclauses.boxes</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:16"><span class="id" title="variable">w0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:22" class="idref" href="#box:22"><span class="id" title="binder">box</span></a> =&gt; <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver_val:19"><span class="id" title="variable">solver_val</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:22"><span class="id" title="variable">box</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="conflict_set:25" class="idref" href="#conflict_set:25"><span class="id" title="binder">conflict_set</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#fired_box_clauses:23"><span class="id" title="variable">fired_box_clauses</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:24" class="idref" href="#box:24"><span class="id" title="binder">box</span></a> =&gt; <span class="id" title="definition">List.existsb</span> (<a class="idref" href="CegarTableaux.Lit.html#eqb"><span class="id" title="definition">Lit.eqb</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:24"><span class="id" title="variable">box</span></a>)) <a class="idref" href="CegarTableaux.Solver.html#core:21"><span class="id" title="variable">core</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="abbreviation">List.map</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="CegarTableaux.Solver.html#c:20"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="new_clause:26" class="idref" href="#new_clause:26"><span class="id" title="binder">new_clause</span></a> := <span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:25"><span class="id" title="variable">conflict_set</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.SatSolver.html#clause_atms_in"><span class="id" title="definition">SatSolver.clause_atms_in</span></a> <a class="idref" href="CegarTableaux.Solver.html#new_clause:26"><span class="id" title="variable">new_clause</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:17"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:18"><span class="id" title="variable">assumptions</span></a>.<br/>
<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">w0</span> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">solver_val</span> <span class="id" title="var">c</span> <span class="id" title="var">core</span> <span class="id" title="var">Hsolver</span> <span class="id" title="var">Hsolver_val</span> <span class="id" title="var">Hc</span> <span class="id" title="var">fired_box_clauses</span> <span class="id" title="var">conflict_set</span> <span class="id" title="var">new_clause</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.SatSolver.html#clause_atms_in"><span class="id" title="definition">SatSolver.clause_atms_in</span></a>, <a class="idref" href="CegarTableaux.CplClause.html#In"><span class="id" title="definition">CplClause.In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">new_clause</span> <span class="id" title="var">conflict_set</span> <span class="id" title="var">fired_box_clauses</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> "|&gt;" <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hxc</span> | <span class="id" title="var">Hxin</span>].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;=&nbsp;c&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.SatSolver.html#valuation_in_clauses"><span class="id" title="method">SatSolver.valuation_in_clauses</span></a> <span class="id" title="var">assumptions</span> <span class="id" title="var">solver_val</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.Lit.html#negate_eq_atm"><span class="id" title="lemma">Lit.negate_eq_atm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#forces_in"><span class="id" title="lemma">Valuation.forces_in</span></a>...<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;x&nbsp;in&nbsp;conflict&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;simplify&nbsp;the&nbsp;long&nbsp;chain&nbsp;of&nbsp;maps&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="lemma">List.in_map_iff</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hxin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lx</span> [<span class="id" title="var">Hlx</span> [<span class="id" title="var">nlx</span> [<span class="id" title="var">Hnlx</span> [<span class="id" title="var">box</span> [<span class="id" title="var">Hboxfst</span> <span class="id" title="var">Hbox</span>]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">x</span> <span class="id" title="var">lx</span> <span class="id" title="var">nlx</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;remove&nbsp;the&nbsp;two&nbsp;filters&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;first&nbsp;filter&nbsp;doesn't&nbsp;matter,&nbsp;second&nbsp;filter&nbsp;shows&nbsp;that&nbsp;(fst&nbsp;box)&nbsp;is&nbsp;in&nbsp;solver&nbsp;val&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.incl_filter</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbox</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">List.filter_In</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbox</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hbox</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hbox</span>].<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="CegarTableaux.SatSolver.html#valuation_in_clauses"><span class="id" title="method">SatSolver.valuation_in_clauses</span></a> <span class="id" title="var">assumptions</span> <span class="id" title="var">solver_val</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="CegarTableaux.Lit.html#negate_eq_atm"><span class="id" title="lemma">Lit.negate_eq_atm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#forces_in"><span class="id" title="lemma">Valuation.forces_in</span></a>...<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="incl_length_le" class="idref" href="#incl_length_le"><span class="id" title="lemma">incl_length_le</span></a> : <span class="id" title="keyword">forall</span> {<a id="A:27" class="idref" href="#A:27"><span class="id" title="binder">A</span></a>} (<a id="eqA:28" class="idref" href="#eqA:28"><span class="id" title="binder">eqA</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="CegarTableaux.Solver.html#A:27"><span class="id" title="variable">A</span></a>) (<a id="l:29" class="idref" href="#l:29"><span class="id" title="binder">l</span></a> <a id="l':30" class="idref" href="#l':30"><span class="id" title="binder">l'</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#A:27"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;<span class="id" title="definition">SetoidList.inclA</span> <a class="idref" href="CegarTableaux.Solver.html#eqA:28"><span class="id" title="variable">eqA</span></a> <a class="idref" href="CegarTableaux.Solver.html#l:29"><span class="id" title="variable">l</span></a> <a class="idref" href="CegarTableaux.Solver.html#l':30"><span class="id" title="variable">l'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="inductive">SetoidList.NoDupA</span> <a class="idref" href="CegarTableaux.Solver.html#eqA:28"><span class="id" title="variable">eqA</span></a> <a class="idref" href="CegarTableaux.Solver.html#l:29"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> <a class="idref" href="CegarTableaux.Solver.html#l:29"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="abbreviation">List.length</span> <a class="idref" href="CegarTableaux.Solver.html#l':30"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Local Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span> ].<br/>

<br/>
<span class="comment">(*&nbsp;RA&nbsp;=&nbsp;Restart&nbsp;Attempt&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="RA" class="idref" href="#RA"><span class="id" title="module">RA</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;valuation&nbsp;at&nbsp;a&nbsp;specfic&nbsp;restart&nbsp;attempt&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="RA.t" class="idref" href="#RA.t"><span class="id" title="record">t</span></a> := <span class="id" title="var">make</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="RA.solver" class="idref" href="#RA.solver"><span class="id" title="projection">solver</span></a> : <a class="idref" href="CegarTableaux.SatSolver.html#t"><span class="id" title="axiom">SatSolver.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="RA.val" class="idref" href="#RA.val"><span class="id" title="projection">val</span></a> : <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a>;<br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#RA"><span class="id" title="module">RA</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;all&nbsp;restart&nbsp;attempts&nbsp;for&nbsp;a&nbsp;single&nbsp;world&nbsp;*)</span><br/>
<span class="id" title="keyword">Module</span> <a id="RAs" class="idref" href="#RAs"><span class="id" title="module">RAs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="RAs.t" class="idref" href="#RAs.t"><span class="id" title="record">t</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="RAs.w0" class="idref" href="#RAs.w0"><span class="id" title="projection">w0</span></a> : <a class="idref" href="CegarTableaux.Lclauses.html#t"><span class="id" title="record">Lclauses.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="RAs.assumptions" class="idref" href="#RAs.assumptions"><span class="id" title="projection">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;might&nbsp;need&nbsp;dia_firer,&nbsp;conflict_set,&nbsp;unsat_core?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="RAs.hist" class="idref" href="#RAs.hist"><span class="id" title="projection">hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Solver.html#RA.t"><span class="id" title="record">RA.t</span></a>;<br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="RAs.cons" class="idref" href="#RAs.cons"><span class="id" title="definition">cons</span></a> (<a id="head:38" class="idref" href="#head:38"><span class="id" title="binder">head</span></a> : <a class="idref" href="CegarTableaux.Solver.html#RA.t"><span class="id" title="record">RA.t</span></a>) (<a id="tail:39" class="idref" href="#tail:39"><span class="id" title="binder">tail</span></a> : <a class="idref" href="CegarTableaux.Solver.html#RAs.t"><span class="id" title="record">t</span></a>) := {| <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#RAs.w0"><span class="id" title="projection">w0</span></a> := <a class="idref" href="CegarTableaux.Solver.html#RAs.w0"><span class="id" title="projection">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:39"><span class="id" title="variable">tail</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#RAs.assumptions"><span class="id" title="projection">assumptions</span></a> := <a class="idref" href="CegarTableaux.Solver.html#RAs.assumptions"><span class="id" title="projection">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:39"><span class="id" title="variable">tail</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#RAs.hist"><span class="id" title="projection">hist</span></a> := <a class="idref" href="CegarTableaux.Solver.html#head:38"><span class="id" title="variable">head</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CegarTableaux.Solver.html#RAs.hist"><span class="id" title="projection">hist</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:39"><span class="id" title="variable">tail</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a id="f3b3534b38e090523254b627fdadccbb" class="idref" href="#f3b3534b38e090523254b627fdadccbb"><span class="id" title="notation">&quot;</span></a>:$:" := <a class="idref" href="CegarTableaux.Solver.html#RAs.cons"><span class="id" title="definition">cons</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>).<br/>

<br/>
<span class="comment">(*&nbsp;<br/>
&nbsp;&nbsp;Class&nbsp;Correct&nbsp;(ras&nbsp;:&nbsp;t)&nbsp;:=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;nodup&nbsp;:&nbsp;SetoidList.NoDupA&nbsp;Valuation.eq&nbsp;(List.map&nbsp;RA.val&nbsp;(hist&nbsp;ras))<br/>
&nbsp;&nbsp;}.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;<br/>
&nbsp;&nbsp;Program&nbsp;Instance&nbsp;correct_init&nbsp;:&nbsp;forall&nbsp;w0&nbsp;assumptions&nbsp;val,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;solver&nbsp;:=&nbsp;SatSolver.make_with_clauses&nbsp;(Lclauses.cpls&nbsp;w0)&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;SatSolver.Solution.Sat&nbsp;val&nbsp;=&nbsp;SatSolver.solve_with_assumptions&nbsp;solver&nbsp;assumptions&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Correct&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w0&nbsp;:=&nbsp;w0;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assumptions&nbsp;:=&nbsp;assumptions;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hist&nbsp;:=&nbsp;<span class="inlinecode">{|</span>
        <span class="inlinecode"><span class="id" title="var">RA.solver</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">solver</span>;</span>
        <span class="inlinecode"><span class="id" title="var">RA.val</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">val</span>;</span>
      <span class="inlinecode">|}</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}&nbsp;:=&nbsp;{}.<br/>
&nbsp;&nbsp;Next&nbsp;Obligation.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;apply&nbsp;SetoidList.NoDupA_singleton.<br/>
&nbsp;&nbsp;Qed.<br/>
<br/>
&nbsp;&nbsp;Program&nbsp;Instance&nbsp;correct_ind&nbsp;:&nbsp;forall&nbsp;w0&nbsp;assumptions&nbsp;ras&nbsp;next,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Correct&nbsp;ras&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Correct&nbsp;(cons&nbsp;next&nbsp;ras).&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="RAs.ok" class="idref" href="#RAs.ok"><span class="id" title="definition, inductive"><span id="RAs.ok_ind" class="id"><span id="RAs.ok_sind" class="id">ok</span></span></span></a> : <a class="idref" href="CegarTableaux.Solver.html#RAs.t"><span class="id" title="record">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="RAs.ok_fst" class="idref" href="#RAs.ok_fst"><span class="id" title="constructor">ok_fst</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="w0:42" class="idref" href="#w0:42"><span class="id" title="binder">w0</span></a> <a id="assumptions:43" class="idref" href="#assumptions:43"><span class="id" title="binder">assumptions</span></a> <a id="val:44" class="idref" href="#val:44"><span class="id" title="binder">val</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver:45" class="idref" href="#solver:45"><span class="id" title="binder">solver</span></a> := <a class="idref" href="CegarTableaux.SatSolver.html#make_with_clauses"><span class="id" title="definition">SatSolver.make_with_clauses</span></a> (<a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:42"><span class="id" title="variable">w0</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.SatSolver.html#Solution.Sat"><span class="id" title="constructor">SatSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:44"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.SatSolver.html#solve_with_assumptions"><span class="id" title="axiom">SatSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:45"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:43"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#ok:40"><span class="id" title="inductive">ok</span></a> {|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#RAs.w0"><span class="id" title="projection">w0</span></a> := <a class="idref" href="CegarTableaux.Solver.html#w0:42"><span class="id" title="variable">w0</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#RAs.assumptions"><span class="id" title="projection">assumptions</span></a> := <a class="idref" href="CegarTableaux.Solver.html#assumptions:43"><span class="id" title="variable">assumptions</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#RAs.hist"><span class="id" title="projection">hist</span></a> := <span class="id" title="notation">[</span><a class="idref" href="CegarTableaux.Solver.html#RA.make"><span class="id" title="constructor">RA.make</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:45"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#val:44"><span class="id" title="variable">val</span></a><span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;need&nbsp;to&nbsp;define&nbsp;the&nbsp;conflict&nbsp;set&nbsp;somewhere.&nbsp;but&nbsp;how&nbsp;to&nbsp;avoid&nbsp;an&nbsp;option?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a id="RAs.ok_cons" class="idref" href="#RAs.ok_cons"><span class="id" title="constructor">ok_cons</span></a> : <span class="id" title="keyword">forall</span> <a id="a:46" class="idref" href="#a:46"><span class="id" title="binder">a</span></a> <a id="b:47" class="idref" href="#b:47"><span class="id" title="binder">b</span></a> <a id="rest:48" class="idref" href="#rest:48"><span class="id" title="binder">rest</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#ok:40"><span class="id" title="inductive">ok</span></a> (<a class="idref" href="CegarTableaux.Solver.html#b:47"><span class="id" title="variable">b</span></a> <a class="idref" href="CegarTableaux.Solver.html#f3b3534b38e090523254b627fdadccbb"><span class="id" title="notation">:$:</span></a> <a class="idref" href="CegarTableaux.Solver.html#rest:48"><span class="id" title="variable">rest</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#a:46"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#a:46"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#ok:40"><span class="id" title="inductive">ok</span></a> (<a class="idref" href="CegarTableaux.Solver.html#a:46"><span class="id" title="variable">a</span></a> <a class="idref" href="CegarTableaux.Solver.html#f3b3534b38e090523254b627fdadccbb"><span class="id" title="notation">:$:</span></a> <a class="idref" href="CegarTableaux.Solver.html#b:47"><span class="id" title="variable">b</span></a> <a class="idref" href="CegarTableaux.Solver.html#f3b3534b38e090523254b627fdadccbb"><span class="id" title="notation">:$:</span></a> <a class="idref" href="CegarTableaux.Solver.html#rest:48"><span class="id" title="variable">rest</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="CegarTableaux.Solver.html#RAs"><span class="id" title="module">RAs</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
&nbsp;&nbsp;INVARIANT:&nbsp;solver&nbsp;contains&nbsp;all&nbsp;CPL&nbsp;clauses&nbsp;of&nbsp;w0<br/>
*)</span><br/>
<span class="id" title="keyword">Notation</span> <a id="cegar_box_rec" class="idref" href="#cegar_box_rec"><span class="id" title="abbreviation">cegar_box_rec</span></a><br/>
&nbsp;&nbsp;<span class="id" title="var">assumptions</span> <span class="comment">(*&nbsp;Assumptions.t&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">phi</span> <span class="comment">(*&nbsp;Mchain.t&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">solver</span> <span class="comment">(*&nbsp;SatSolver.t&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">val_hist</span> <span class="comment">(*&nbsp;list&nbsp;Valuation.t&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">process_dias</span> <span class="comment">(*&nbsp;function&nbsp;below&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">Hsolver</span> <span class="id" title="var">Hvaluation</span> <span class="id" title="var">Hval_hist_incl</span> <span class="id" title="var">Hval_hist_nodup</span> <span class="id" title="var">Hmeasure</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;:&nbsp;Solution.t&nbsp;*)</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.SatSolver.html#solve_with_assumptions"><span class="id" title="axiom">SatSolver.solve_with_assumptions</span></a> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;UNSAT&nbsp;base&nbsp;case:&nbsp;a&nbsp;subset&nbsp;is&nbsp;unsat&nbsp;-&gt;&nbsp;whole&nbsp;thing&nbsp;must&nbsp;be&nbsp;unsat.&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.SatSolver.html#Solution.Unsat"><span class="id" title="constructor">SatSolver.Solution.Unsat</span></a> <span class="id" title="var">core</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <span class="id" title="var">core</span><br/>
&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.SatSolver.html#Solution.Sat"><span class="id" title="constructor">SatSolver.Solution.Sat</span></a> <span class="id" title="var">valuation</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">phi</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;more&nbsp;dia&nbsp;clauses,&nbsp;don't&nbsp;need&nbsp;to&nbsp;recurse&nbsp;to&nbsp;the&nbsp;next&nbsp;world.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;any&nbsp;fired&nbsp;box&nbsp;clauses&nbsp;would&nbsp;be&nbsp;trivially&nbsp;satisfiable&nbsp;by&nbsp;non-existence&nbsp;of&nbsp;next&nbsp;world.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tail</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">process_dias</span> <span class="id" title="var">assumptions</span> <span class="id" title="var">w0</span> <span class="id" title="var">tail</span> <span class="id" title="var">solver</span> <span class="id" title="var">valuation</span> (<a class="idref" href="CegarTableaux.Lclauses.html#dias"><span class="id" title="projection">Lclauses.dias</span></a> <span class="id" title="var">w0</span>) (<span class="id" title="var">valuation</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">val_hist</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hsolver</span> <span class="id" title="var">Hvaluation</span> <span class="id" title="var">Hval_hist_incl</span> <span class="id" title="var">Hval_hist_nodup</span> <span class="id" title="var">Hmeasure</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="process_dias" class="idref" href="#process_dias"><span class="id" title="definition">process_dias</span></a><br/>
&nbsp;&nbsp;(<a id="assumptions:49" class="idref" href="#assumptions:49"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="w0:50" class="idref" href="#w0:50"><span class="id" title="binder">w0</span></a> : <a class="idref" href="CegarTableaux.Lclauses.html#t"><span class="id" title="record">Lclauses.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="tail:51" class="idref" href="#tail:51"><span class="id" title="binder">tail</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="solver:52" class="idref" href="#solver:52"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.SatSolver.html#t"><span class="id" title="axiom">SatSolver.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="valuation:53" class="idref" href="#valuation:53"><span class="id" title="binder">valuation</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Lit.html#t"><span class="id" title="inductive">Lit.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="dias:54" class="idref" href="#dias:54"><span class="id" title="binder">dias</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.DiaClause.html#t"><span class="id" title="definition">DiaClause.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="val_hist:55" class="idref" href="#val_hist:55"><span class="id" title="binder">val_hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsolver:56" class="idref" href="#Hsolver:56"><span class="id" title="binder">Hsolver</span></a> : <a class="idref" href="CegarTableaux.SatSolver.html#solver_axioms"><span class="id" title="class">SatSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:52"><span class="id" title="variable">solver</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hvaluation:57" class="idref" href="#Hvaluation:57"><span class="id" title="binder">Hvaluation</span></a> : <a class="idref" href="CegarTableaux.SatSolver.html#Solution.Sat"><span class="id" title="constructor">SatSolver.Solution.Sat</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:53"><span class="id" title="variable">valuation</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.SatSolver.html#solve_with_assumptions"><span class="id" title="axiom">SatSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:52"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:49"><span class="id" title="variable">assumptions</span></a>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;val_hist&nbsp;must&nbsp;be&nbsp;in&nbsp;the&nbsp;set&nbsp;of&nbsp;all&nbsp;valuations&nbsp;*)</span><br/>
&nbsp;&nbsp;(<a id="Hval_hist_incl:58" class="idref" href="#Hval_hist_incl:58"><span class="id" title="binder">Hval_hist_incl</span></a> : <span class="id" title="definition">SetoidList.inclA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val_hist:55"><span class="id" title="variable">val_hist</span></a> (<a class="idref" href="CegarTableaux.SatSolver.html#every_valuation"><span class="id" title="definition">SatSolver.every_valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:52"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:49"><span class="id" title="variable">assumptions</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hval_hist_nodup:59" class="idref" href="#Hval_hist_nodup:59"><span class="id" title="binder">Hval_hist_nodup</span></a> : <span class="id" title="inductive">SetoidList.NoDupA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val_hist:55"><span class="id" title="variable">val_hist</span></a>)<br/>
&nbsp;&nbsp;{<span class="id" title="keyword">measure</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> <span class="id" title="var">tail</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;remaining&nbsp;number&nbsp;of&nbsp;possible&nbsp;valuations&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> (<a class="idref" href="CegarTableaux.SatSolver.html#every_valuation"><span class="id" title="definition">SatSolver.every_valuation</span></a> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Nat.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="abbreviation">List.length</span> <span class="id" title="var">val_hist</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> <span class="id" title="var">dias</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#dias:54"><span class="id" title="variable">dias</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;more&nbsp;dia-clauses:&nbsp;every&nbsp;diamond&nbsp;has&nbsp;been&nbsp;fulfilled,&nbsp;SAT&nbsp;base&nbsp;case.&nbsp;*)</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;extra&nbsp;clauses&nbsp;and&nbsp;extra&nbsp;dias&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">dias'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="clause_is_fired:62" class="idref" href="#clause_is_fired:62"><span class="id" title="binder">clause_is_fired</span></a> := <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:53"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">c</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#clause_is_fired:62"><span class="id" title="variable">clause_is_fired</span></a> <span class="id" title="keyword">with</span>  <span class="comment">(*&nbsp;if&nbsp;statements&nbsp;are&nbsp;more&nbsp;complicated&nbsp;when&nbsp;proving&nbsp;obligations&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;unfired&nbsp;dia&nbsp;clause:&nbsp;just&nbsp;go&nbsp;to&nbsp;next&nbsp;dia&nbsp;clause&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;at&nbsp;this&nbsp;recursion&nbsp;(1),&nbsp;tail&nbsp;equal,&nbsp;remaining&nbsp;valuations&nbsp;equal,&nbsp;dias&nbsp;decreasing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#process_dias:60"><span class="id" title="definition">process_dias</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:49"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:50"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:51"><span class="id" title="variable">tail</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:52"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:53"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">dias'</span> <a class="idref" href="CegarTableaux.Solver.html#val_hist:55"><span class="id" title="variable">val_hist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;this&nbsp;clause&nbsp;has&nbsp;been&nbsp;fired.&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;make&nbsp;this&nbsp;an&nbsp;input&nbsp;to&nbsp;the&nbsp;function?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="fired_box_clauses:65" class="idref" href="#fired_box_clauses:65"><span class="id" title="binder">fired_box_clauses</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;for&nbsp;each&nbsp;box&nbsp;clause&nbsp;a&nbsp;-&gt;&nbsp;<span class="inlinecode"></span>b,&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Lclauses.html#boxes"><span class="id" title="projection">Lclauses.boxes</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:50"><span class="id" title="variable">w0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;filter&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">a</span></span>&nbsp;(fst&nbsp;box)&nbsp;in&nbsp;the&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:64" class="idref" href="#box:64"><span class="id" title="binder">box</span></a> =&gt; <a class="idref" href="CegarTableaux.Valuation.html#forces_lit"><span class="id" title="definition">Valuation.forces_lit</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:53"><span class="id" title="variable">valuation</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:64"><span class="id" title="variable">box</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="fired_box_lits:66" class="idref" href="#fired_box_lits:66"><span class="id" title="binder">fired_box_lits</span></a> := <span class="id" title="abbreviation">List.map</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CegarTableaux.Solver.html#fired_box_clauses:65"><span class="id" title="variable">fired_box_clauses</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="next_cpls:68" class="idref" href="#next_cpls:68"><span class="id" title="binder">next_cpls</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#tail:51"><span class="id" title="variable">tail</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">w1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <span class="id" title="var">w1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;try&nbsp;a&nbsp;JUMP&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;at&nbsp;this&nbsp;recursion&nbsp;(2),&nbsp;tail&nbsp;is&nbsp;decreasing,&nbsp;others&nbsp;don't&nbsp;matter.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="jump:69" class="idref" href="#jump:69"><span class="id" title="binder">jump</span></a> := <a class="idref" href="CegarTableaux.Solver.html#cegar_box_rec"><span class="id" title="abbreviation">cegar_box_rec</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CegarTableaux.Solver.html#fired_box_lits:66"><span class="id" title="variable">fired_box_lits</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#tail:51"><span class="id" title="variable">tail</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="CegarTableaux.SatSolver.html#make_with_clauses"><span class="id" title="definition">SatSolver.make_with_clauses</span></a> <a class="idref" href="CegarTableaux.Solver.html#next_cpls:68"><span class="id" title="variable">next_cpls</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#process_dias:60"><span class="id" title="definition">process_dias</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#jump:69"><span class="id" title="variable">jump</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;JUMP&nbsp;success:&nbsp;continue&nbsp;with&nbsp;next&nbsp;dia&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;at&nbsp;this&nbsp;recursion&nbsp;(3),&nbsp;tail&nbsp;equal,&nbsp;remaining&nbsp;valuations&nbsp;equal,&nbsp;dias&nbsp;decreasing&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#process_dias:60"><span class="id" title="definition">process_dias</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:49"><span class="id" title="variable">assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#w0:50"><span class="id" title="variable">w0</span></a> <a class="idref" href="CegarTableaux.Solver.html#tail:51"><span class="id" title="variable">tail</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:52"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#valuation:53"><span class="id" title="variable">valuation</span></a> <span class="id" title="var">dias'</span> <a class="idref" href="CegarTableaux.Solver.html#val_hist:55"><span class="id" title="variable">val_hist</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;JUMP&nbsp;fail:&nbsp;RESTART&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.Solver.html#Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <span class="id" title="var">core</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;get&nbsp;the&nbsp;conflict&nbsp;set:&nbsp;all&nbsp;names&nbsp;that&nbsp;fired&nbsp;some&nbsp;literal&nbsp;in&nbsp;the&nbsp;core&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="conflict_set:72" class="idref" href="#conflict_set:72"><span class="id" title="binder">conflict_set</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#fired_box_clauses:65"><span class="id" title="variable">fired_box_clauses</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="definition">List.filter</span> (<span class="id" title="keyword">fun</span> <a id="box:71" class="idref" href="#box:71"><span class="id" title="binder">box</span></a> =&gt; <span class="id" title="definition">List.existsb</span> (<a class="idref" href="CegarTableaux.Lit.html#eqb"><span class="id" title="definition">Lit.eqb</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="CegarTableaux.Solver.html#box:71"><span class="id" title="variable">box</span></a>)) <span class="id" title="var">core</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#53407782e708e33cf564f4172e0ae9a0"><span class="id" title="notation">|&gt;</span></a> <span class="id" title="abbreviation">List.map</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;add&nbsp;c&nbsp;as&nbsp;well&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="conflict_set:73" class="idref" href="#conflict_set:73"><span class="id" title="binder">conflict_set</span></a> := <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:72"><span class="id" title="variable">conflict_set</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;conflict_set&nbsp;is&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;conjunction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;negate&nbsp;the&nbsp;whole&nbsp;thing&nbsp;to&nbsp;become&nbsp;a&nbsp;cpl&nbsp;clause,&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;disjunction&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="new_clause:74" class="idref" href="#new_clause:74"><span class="id" title="binder">new_clause</span></a> := <span class="id" title="abbreviation">List.map</span> <a class="idref" href="CegarTableaux.Lit.html#negate"><span class="id" title="definition">Lit.negate</span></a> <a class="idref" href="CegarTableaux.Solver.html#conflict_set:73"><span class="id" title="variable">conflict_set</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="solver:75" class="idref" href="#solver:75"><span class="id" title="binder">solver</span></a> := <a class="idref" href="CegarTableaux.SatSolver.html#add_clause"><span class="id" title="axiom">SatSolver.add_clause</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:52"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#new_clause:74"><span class="id" title="variable">new_clause</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;RESTART&nbsp;with&nbsp;new&nbsp;solver&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;at&nbsp;this&nbsp;recursion&nbsp;(4),&nbsp;tail&nbsp;equal,&nbsp;remaining&nbsp;valuations&nbsp;decreasing,&nbsp;...&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box_rec"><span class="id" title="abbreviation">cegar_box_rec</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:49"><span class="id" title="variable">assumptions</span></a> (<a class="idref" href="CegarTableaux.Solver.html#w0:50"><span class="id" title="variable">w0</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><a class="idref" href="CegarTableaux.Solver.html#tail:51"><span class="id" title="variable">tail</span></a>) <a class="idref" href="CegarTableaux.Solver.html#solver:75"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#val_hist:55"><span class="id" title="variable">val_hist</span></a> <a class="idref" href="CegarTableaux.Solver.html#process_dias:60"><span class="id" title="definition">process_dias</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;There&nbsp;are&nbsp;multiple&nbsp;different&nbsp;proofs&nbsp;we&nbsp;are&nbsp;doing&nbsp;here:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;solver&nbsp;always&nbsp;satisfies&nbsp;solver&nbsp;axioms&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;valuation&nbsp;history&nbsp;is&nbsp;always&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;valuations,&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;and&nbsp;the&nbsp;decreasing&nbsp;argument.&nbsp;*)</span><br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;(1):&nbsp;dias&nbsp;decreasing&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">dias</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;solver&nbsp;with&nbsp;clauses&nbsp;satisfies&nbsp;axioms&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#axioms_clauses"><span class="id" title="lemma">SatSolver.axioms_clauses</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>. <span class="comment">(*&nbsp;inclusion&nbsp;of&nbsp;a&nbsp;single&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">valuation</span> <span class="id" title="var">into</span> <span class="id" title="var">val</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">SetoidList.inclA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv_val</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">SetoidList.InA_singleton</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv_val</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="CegarTableaux.Solver.html#InA_eqA"><span class="id" title="lemma">InA_eqA</span></a> <span class="id" title="var">v</span> <span class="id" title="var">val</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#valuation_in_every_valuation_of"><span class="id" title="lemma">SatSolver.valuation_in_every_valuation_of</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">valuation</span>:=<span class="id" title="var">val</span>)...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#axioms_clauses"><span class="id" title="lemma">SatSolver.axioms_clauses</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;valuation&nbsp;no&nbsp;dup&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">SetoidList.NoDupA_singleton</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;(2):&nbsp;tail&nbsp;decreasing&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">tail</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;(3):&nbsp;dias&nbsp;decreasing&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">dias</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;solver&nbsp;with&nbsp;extra&nbsp;clause&nbsp;satsifies&nbsp;axioms&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#axioms_ind"><span class="id" title="axiom">SatSolver.axioms_ind</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsolver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span>. <span class="comment">(*&nbsp;inclusion&nbsp;with&nbsp;solver&nbsp;with&nbsp;added&nbsp;conflict&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;clear&nbsp;valuation0&nbsp;Heq_anonymous0.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solver</span> <span class="id" title="var">into</span> <span class="id" title="var">solver'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solver0</span> <span class="id" title="var">into</span> <span class="id" title="var">solver</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valuation</span> <span class="id" title="var">into</span> <span class="id" title="var">solver'_val</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valuation0</span> <span class="id" title="var">into</span> <span class="id" title="var">solver_val</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#PermutationA_inclA"><span class="id" title="lemma">PermutationA_inclA</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<a class="idref" href="CegarTableaux.SatSolver.html#every_valuation"><span class="id" title="definition">SatSolver.every_valuation</span></a> <span class="id" title="var">solver</span> <span class="id" title="var">assumptions</span>)...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.SatSolver.html#every_valuation"><span class="id" title="definition">SatSolver.every_valuation</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#every_valuation_perm"><span class="id" title="axiom">Valuation.every_valuation_perm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">solver'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#add_no_new_atms"><span class="id" title="lemma">SatSolver.add_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set_no_new_atms"><span class="id" title="lemma">conflict_set_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#inclA_cons"><span class="id" title="lemma">inclA_cons</span></a>. { <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;solver'_val&nbsp;in&nbsp;every&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.ListExt.html#PermutationA_inA"><span class="id" title="lemma">PermutationA_inA</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span>:=<a class="idref" href="CegarTableaux.SatSolver.html#every_valuation"><span class="id" title="definition">SatSolver.every_valuation</span></a> <span class="id" title="var">solver'</span> <span class="id" title="var">assumptions</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#every_valuation_perm"><span class="id" title="axiom">Valuation.every_valuation_perm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">solver'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#add_no_new_atms"><span class="id" title="lemma">SatSolver.add_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set_no_new_atms"><span class="id" title="lemma">conflict_set_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#valuation_in_every_valuation_of"><span class="id" title="lemma">SatSolver.valuation_in_every_valuation_of</span></a>... <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#axioms_ind"><span class="id" title="axiom">SatSolver.axioms_ind</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">Hval_hist_incl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;valuations&nbsp;have&nbsp;no&nbsp;dup&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">filtered_var</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_anonymous</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">w1</span> <span class="id" title="var">tail0</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq_anonymous</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">solver</span> <span class="id" title="var">into</span> <span class="id" title="var">solver'</span>, <span class="id" title="var">solver0</span> <span class="id" title="var">into</span> <span class="id" title="var">solver</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">auto</span>. <span class="comment">(*&nbsp;(4)&nbsp;remaining&nbsp;valuations&nbsp;decreasing&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;neaten&nbsp;up&nbsp;state&nbsp;a&nbsp;bit&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">filtered_var</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_anonymous</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">w1</span> <span class="id" title="var">tail0</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq_anonymous</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">solver</span> <span class="id" title="var">into</span> <span class="id" title="var">solver'</span>, <span class="id" title="var">solver0</span> <span class="id" title="var">into</span> <span class="id" title="var">solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt"><span class="id" title="definition">lexnat3_lt</span></a>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">right</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#sub_S_lt"><span class="id" title="lemma">sub_S_lt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;number&nbsp;of&nbsp;possible&nbsp;valuations&nbsp;is&nbsp;equal&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="lemma">Permutation_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">solver'</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#same_atms_valuation_set"><span class="id" title="axiom">SatSolver.same_atms_valuation_set</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#axioms_ind"><span class="id" title="axiom">SatSolver.axioms_ind</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#add_no_new_atms"><span class="id" title="lemma">SatSolver.add_no_new_atms</span></a>...<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#conflict_set_no_new_atms"><span class="id" title="lemma">conflict_set_no_new_atms</span></a>...<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;valuation&nbsp;history&nbsp;&lt;&nbsp;every&nbsp;valuation&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;first&nbsp;show&nbsp;&lt;=&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">Nat.le_neq</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#incl_length_le"><span class="id" title="axiom">incl_length_le</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">eqA</span> := <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;need&nbsp;to&nbsp;use&nbsp;above&nbsp;obligation.&nbsp;extract&nbsp;the&nbsp;core&nbsp;into&nbsp;a&nbsp;lemma?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">admit</span>. - <span class="id" title="var">admit</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;setoid_rewrite&nbsp;Nat.le_lteq&nbsp;in&nbsp;H.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;then&nbsp;show&nbsp;&lt;&gt;&nbsp;because&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;for&nbsp;solver'&nbsp;to&nbsp;return&nbsp;sat.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;is&nbsp;because&nbsp;the&nbsp;new&nbsp;valuation&nbsp;must&nbsp;be&nbsp;in&nbsp;every&nbsp;valuation&nbsp;AND<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;new&nbsp;valuation&nbsp;is&nbsp;not&nbsp;in&nbsp;val&nbsp;hist.&nbsp;*)</span><br/>
<span class="id" title="var">Admitted</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="comment">(*&nbsp;lexnat3_lt&nbsp;is&nbsp;well-founded.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Program.Wf.html#MR"><span class="id" title="definition">MR</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">wf_inverse_image</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="CegarTableaux.Solver.html#lexnat3_lt_wf"><span class="id" title="lemma">lexnat3_lt_wf</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="cegar_box" class="idref" href="#cegar_box"><span class="id" title="definition">cegar_box</span></a><br/>
&nbsp;&nbsp;(<a id="assumptions:76" class="idref" href="#assumptions:76"><span class="id" title="binder">assumptions</span></a> : <a class="idref" href="CegarTableaux.Assumptions.html#t"><span class="id" title="definition">Assumptions.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="phi:77" class="idref" href="#phi:77"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="solver:78" class="idref" href="#solver:78"><span class="id" title="binder">solver</span></a> : <a class="idref" href="CegarTableaux.SatSolver.html#t"><span class="id" title="axiom">SatSolver.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="val_hist:79" class="idref" href="#val_hist:79"><span class="id" title="binder">val_hist</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="CegarTableaux.Valuation.html#t"><span class="id" title="definition">Valuation.t</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hsolver:80" class="idref" href="#Hsolver:80"><span class="id" title="binder">Hsolver</span></a> : <a class="idref" href="CegarTableaux.SatSolver.html#solver_axioms"><span class="id" title="class">SatSolver.solver_axioms</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:78"><span class="id" title="variable">solver</span></a>)<br/>
&nbsp;&nbsp;(<a id="Hval_hist_incl:81" class="idref" href="#Hval_hist_incl:81"><span class="id" title="binder">Hval_hist_incl</span></a> : <span class="id" title="definition">SetoidList.inclA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val_hist:79"><span class="id" title="variable">val_hist</span></a> (<a class="idref" href="CegarTableaux.SatSolver.html#every_valuation"><span class="id" title="definition">SatSolver.every_valuation</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:78"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:76"><span class="id" title="variable">assumptions</span></a>))<br/>
&nbsp;&nbsp;(<a id="Hval_hist_nodup:82" class="idref" href="#Hval_hist_nodup:82"><span class="id" title="binder">Hval_hist_nodup</span></a> : <span class="id" title="inductive">SetoidList.NoDupA</span> <a class="idref" href="CegarTableaux.Valuation.html#eq"><span class="id" title="definition">Valuation.eq</span></a> <a class="idref" href="CegarTableaux.Solver.html#val_hist:79"><span class="id" title="variable">val_hist</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.SatSolver.html#solve_with_assumptions"><span class="id" title="axiom">SatSolver.solve_with_assumptions</span></a> <a class="idref" href="CegarTableaux.Solver.html#solver:78"><span class="id" title="variable">solver</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:76"><span class="id" title="variable">assumptions</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;UNSAT&nbsp;base&nbsp;case:&nbsp;a&nbsp;subset&nbsp;is&nbsp;unsat&nbsp;-&gt;&nbsp;whole&nbsp;thing&nbsp;must&nbsp;be&nbsp;unsat.&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.SatSolver.html#Solution.Unsat"><span class="id" title="constructor">SatSolver.Solution.Unsat</span></a> <span class="id" title="var">core</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Unsat"><span class="id" title="constructor">Solution.Unsat</span></a> <span class="id" title="var">core</span><br/>
&nbsp;&nbsp;| <a class="idref" href="CegarTableaux.SatSolver.html#Solution.Sat"><span class="id" title="constructor">SatSolver.Solution.Sat</span></a> <span class="id" title="var">val</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#phi:77"><span class="id" title="variable">phi</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;more&nbsp;dia&nbsp;clauses,&nbsp;don't&nbsp;need&nbsp;to&nbsp;recurse&nbsp;to&nbsp;the&nbsp;next&nbsp;world.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;any&nbsp;fired&nbsp;box&nbsp;clauses&nbsp;would&nbsp;be&nbsp;trivially&nbsp;satisfiable&nbsp;by&nbsp;non-existence&nbsp;of&nbsp;next&nbsp;world.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tail</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#process_dias"><span class="id" title="definition">process_dias</span></a> <a class="idref" href="CegarTableaux.Solver.html#assumptions:76"><span class="id" title="variable">assumptions</span></a> <span class="id" title="var">w0</span> <span class="id" title="var">tail</span> <a class="idref" href="CegarTableaux.Solver.html#solver:78"><span class="id" title="variable">solver</span></a> <span class="id" title="var">val</span> (<a class="idref" href="CegarTableaux.Lclauses.html#dias"><span class="id" title="projection">Lclauses.dias</span></a> <span class="id" title="var">w0</span>) (<span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="CegarTableaux.Solver.html#val_hist:79"><span class="id" title="variable">val_hist</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;val&nbsp;::&nbsp;val_hist&nbsp;satisfies&nbsp;Hval_hist_incl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">SetoidList.inclA</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">Hv_in_val_val_hist</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">SetoidList.InA_cons</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hv_in_val_val_hist</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;second&nbsp;case&nbsp;is&nbsp;trivial&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hv_in_val_val_hist</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq_v_val</span> | <span class="id" title="var">Hin_v_val_hist</span>]...<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="CegarTableaux.Solver.html#InA_eqA"><span class="id" title="lemma">InA_eqA</span></a> <span class="id" title="var">v</span> <span class="id" title="var">val</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#valuation_in_every_valuation_of"><span class="id" title="lemma">SatSolver.valuation_in_every_valuation_of</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">valuation</span>:=<span class="id" title="var">val</span>)...<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Valuation.html#eq_equivalence"><span class="id" title="instance">Valuation.eq_equivalence</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="cegartab" class="idref" href="#cegartab"><span class="id" title="definition">cegartab</span></a> (<a id="phi:84" class="idref" href="#phi:84"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>) : <a class="idref" href="CegarTableaux.Solver.html#t"><span class="id" title="inductive">Solution.t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cpls:86" class="idref" href="#cpls:86"><span class="id" title="binder">cpls</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="CegarTableaux.Solver.html#phi:84"><span class="id" title="variable">phi</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> =&gt; <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">w0</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tail</span> =&gt; <a class="idref" href="CegarTableaux.Lclauses.html#cpls"><span class="id" title="projection">Lclauses.cpls</span></a> <span class="id" title="var">w0</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Solver.html#cegar_box"><span class="id" title="definition">cegar_box</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="CegarTableaux.Solver.html#phi:84"><span class="id" title="variable">phi</span></a> (<a class="idref" href="CegarTableaux.SatSolver.html#make_with_clauses"><span class="id" title="definition">SatSolver.make_with_clauses</span></a> <a class="idref" href="CegarTableaux.Solver.html#cpls:86"><span class="id" title="variable">cpls</span></a>) <span class="id" title="notation">[]</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.SatSolver.html#axioms_clauses"><span class="id" title="lemma">SatSolver.axioms_clauses</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <span class="id" title="lemma">SetoidList.incl_nil</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="soundness" class="idref" href="#soundness"><span class="id" title="lemma">soundness</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="phi:87" class="idref" href="#phi:87"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>), <a class="idref" href="CegarTableaux.Solver.html#cegartab"><span class="id" title="definition">cegartab</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:87"><span class="id" title="variable">phi</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Mchain.html#satisfiable"><span class="id" title="definition">Mchain.satisfiable</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:87"><span class="id" title="variable">phi</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="completeness" class="idref" href="#completeness"><span class="id" title="lemma">completeness</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="phi:88" class="idref" href="#phi:88"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>), <a class="idref" href="CegarTableaux.Mchain.html#satisfiable"><span class="id" title="definition">Mchain.satisfiable</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:88"><span class="id" title="variable">phi</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#cegartab"><span class="id" title="definition">cegartab</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:88"><span class="id" title="variable">phi</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;we&nbsp;prove&nbsp;the&nbsp;contrapositive.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">phi</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Utils.html#contrapositive"><span class="id" title="lemma">contrapositive</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsolve_unsat</span> <span class="id" title="var">Hsatisfiable</span>.<br/>

<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="correctness" class="idref" href="#correctness"><span class="id" title="lemma">correctness</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<a id="phi:89" class="idref" href="#phi:89"><span class="id" title="binder">phi</span></a> : <a class="idref" href="CegarTableaux.Mchain.html#t"><span class="id" title="definition">Mchain.t</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="CegarTableaux.Mchain.html#satisfiable"><span class="id" title="definition">Mchain.satisfiable</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:89"><span class="id" title="variable">phi</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="CegarTableaux.Solver.html#cegartab"><span class="id" title="definition">cegartab</span></a> <a class="idref" href="CegarTableaux.Solver.html#phi:89"><span class="id" title="variable">phi</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="CegarTableaux.Solver.html#Sat"><span class="id" title="constructor">Solution.Sat</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">phi</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#completeness"><span class="id" title="axiom">completeness</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="CegarTableaux.Solver.html#soundness"><span class="id" title="axiom">soundness</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="indexpage.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>